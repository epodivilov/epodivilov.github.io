parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"yZzA":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,e=arguments[3];!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t(n):(e="undefined"!=typeof globalThis?globalThis:e||self).Tweakpane=n()}(this,function(){"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};function e(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function i(t){return t}function o(t){return null==t}var a={alreadydisposed:function(){return"View has been already disposed"},invalidparams:function(t){return"Invalid parameters for '"+t.name+"'"},nomatchingcontroller:function(t){return"No matching controller for '"+t.key+"'"},nomatchingview:function(t){return"No matching view for '"+JSON.stringify(t.params)+"'"},notbindable:function(){return"Value is not bindable"},propertynotfound:function(t){return"Property '"+t.name+"' not found"},shouldneverhappen:function(){return"This error should never happen"}},s=function(){function t(t){var e;this.message=null!==(e=a[t.type](i(t.context)))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}return t.alreadyDisposed=function(){return new t({type:"alreadydisposed"})},t.notBindable=function(){return new t({type:"notbindable"})},t.propertyNotFound=function(e){return new t({type:"propertynotfound",context:{name:e}})},t.shouldNeverHappen=function(){return new t({type:"shouldneverhappen"})},t}();s.prototype=Object.create(Error.prototype),s.prototype.constructor=s;var l=function(){function t(){this.observers_={}}return t.prototype.on=function(t,e){var n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this},t.prototype.off=function(t,e){var n=this.observers_[t];return n&&(this.observers_[t]=n.filter(function(t){return t.handler!==e})),this},t.prototype.emit=function(t,e){var n=this.observers_[t];n&&n.forEach(function(t){t.handler(e)})},t}(),p=function(){function t(){this.emitter=new l,this.positions_=[]}return Object.defineProperty(t.prototype,"positions",{get:function(){return this.positions_},set:function(t){(function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0})(t,this.positions_)||(this.positions_=t,this.emitter.emit("change",{propertyName:"positions",sender:this}))},enumerable:!1,configurable:!0}),t}(),u="tp";function d(t){return function(e,n){return[u,"-",t,"v",e?"_"+e:"",n?"-"+n:""].join("")}}function c(t){return t.rawValue}function h(t,e){return function(n){!function(t,e,n){n?t.classList.add(e):t.classList.remove(e)}(t,e,n)}}var v=d("");function f(t,e){return h(t,v(void 0,e))}function m(t,e){var n,r;t.emitter.on("change",(n=c,r=e,function(t){return r(n(t))})),e(t.rawValue)}function b(t,e,n){m(t.value(e),n)}function g(t,e){b(t,"disabled",f(e,"disabled")),b(t,"hidden",f(e,"hidden"))}function _(t,e){b(t,"disabled",function(t){e.disabled=t})}function w(t,e){b(t,"disabled",function(t){e.tabIndex=t?-1:0})}function y(t,e,n){b(t,e,function(t){n.textContent=null!=t?t:""})}function x(t,e){t.value("disposed").emitter.on("change",function(t){t&&e()})}var P=d(""),C={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"},k=function(){function t(t){var e=this;this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;var n=this.view.element;this.blade.emitter.on("change",function(t){"positions"===t.propertyName&&(["veryfirst","first","last","verylast"].forEach(function(t){n.classList.remove(P(void 0,C[t]))}),e.blade.positions.forEach(function(t){n.classList.add(P(void 0,C[t]))}))}),x(this.viewProps,function(){e.view.onDispose&&(console.warn("View.onDispose is deprecated. Use ViewProps.value('disposed').emitter instead."),e.view.onDispose()),function(t){t&&t.parentElement&&t.parentElement.removeChild(t)}(n)})}return Object.defineProperty(t.prototype,"parent",{get:function(){return this.parent_},enumerable:!1,configurable:!0}),t}(),E="http://www.w3.org/2000/svg";function V(t){t.offsetHeight}function L(t){return void 0!==t.ontouchstart}function S(){return new Function("return this")()}function A(t){return"document"in S()?t.getContext("2d"):null}var M={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function D(t,e){var n=t.createElementNS(E,"svg");return n.innerHTML=M[e],n}function j(t,e,n){t.insertBefore(e,t.children[n])}function O(t){t.parentElement&&t.parentElement.removeChild(t)}function N(t){for(;t.children.length>0;)t.removeChild(t.children[0])}function I(t){return t.relatedTarget?i(t.relatedTarget):"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}var B=d("lbl");var F=function(){return function(t,e){var n=this;this.element=t.createElement("div"),this.element.classList.add(B()),g(e.viewProps,this.element);var r=t.createElement("div");r.classList.add(B("l")),b(e.props,"label",function(e){o(e)?n.element.classList.add(B(void 0,"nol")):(n.element.classList.remove(B(void 0,"nol")),function(t){for(;t.childNodes.length>0;)t.removeChild(t.childNodes[0])}(r),r.appendChild(function(t,e){var n=t.createDocumentFragment();return e.split("\n").map(function(e){return t.createTextNode(e)}).forEach(function(e,r){r>0&&n.appendChild(t.createElement("br")),n.appendChild(e)}),n}(t,e)))}),this.element.appendChild(r),this.labelElement=r;var i=t.createElement("div");i.classList.add(B("v")),this.element.appendChild(i),this.valueElement=i}}(),R=function(t){function r(e,r){var i=this,o=r.valueController.viewProps;return(i=t.call(this,n(n({},r),{view:new F(e,{props:r.props,viewProps:o}),viewProps:o}))||this).props=r.props,i.valueController=r.valueController,i.view.valueElement.appendChild(i.valueController.view.element),x(i.viewProps,function(){var t=i.valueController;t.onDispose&&(console.warn("Controller.onDispose is deprecated. Use ViewProps.value('disposed').emitter instead."),t.onDispose()),t.view.onDispose&&(console.warn("View.onDispose is deprecated. Use ViewProps.value('disposed').emitter instead."),t.view.onDispose())}),i}return e(r,t),r}(k),U=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.binding=n.binding,r}return e(n,t),n}(R),H=function(){function t(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new l,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}return t.prototype.read=function(){var t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader(t))},t.prototype.write_=function(t){this.writer(this.target,t)},t.prototype.onValueChange_=function(t){this.write_(t.rawValue),this.emitter.emit("change",{rawValue:t.rawValue,sender:this})},t}(),T=function(){function t(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:function(t,e){return t===e},this.emitter=new l,this.rawValue_=t}return Object.defineProperty(t.prototype,"constraint",{get:function(){return this.constraint_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawValue",{get:function(){return this.rawValue_},set:function(t){var e=this.constraint_?this.constraint_.constrain(t):t;!this.equals_(this.rawValue_,e)&&(this.rawValue_=e,this.emitter.emit("change",{rawValue:e,sender:this}))},enumerable:!1,configurable:!0}),t}(),K=function(){function t(t){this.emitter=new l,this.value_=t}return Object.defineProperty(t.prototype,"rawValue",{get:function(){return this.value_},set:function(t){this.value_!==t&&(this.value_=t,this.emitter.emit("change",{sender:this,rawValue:this.value_}))},enumerable:!1,configurable:!0}),t}(),z=function(){function t(t){var e=this;this.emitter=new l;var n=Object.keys(t),r=n.map(function(e){return new K(t[e])});r.forEach(function(t,r){t.emitter.on("change",function(){e.emitter.emit("change",{key:n[r],sender:e})})}),this.valMap_=n.reduce(function(t,e,n){var i;return Object.assign(t,((i={})[e]=r[n],i))},{})}return t.prototype.get=function(t){return this.valMap_[t].rawValue},t.prototype.set=function(t,e){this.valMap_[t].rawValue=e},t.prototype.value=function(t){return this.valMap_[t]},t.prototype.valueEmitter=function(t){return console.warn("ValueMap.valueEmitter is deprecated. Use ValueMap.value.emitter instead.\nThis polyfill will be removed in the next major version."),this.valMap_[t].emitter},t}();function G(t){var e,n,r=null!=t?t:{};return new z({disabled:null!==(e=r.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(n=r.hidden)&&void 0!==n&&n})}var q=function(){function t(t){this.constraints=t}return t.prototype.constrain=function(t){return this.constraints.reduce(function(t,e){return e.constrain(t)},t)},t}();function Y(t,e){if(t instanceof e)return t;if(t instanceof q){var n=t.constraints.reduce(function(t,n){return t||(n instanceof e?n:null)},null);if(n)return n}return null}var $=function(){function t(t){this.options=t}return t.prototype.constrain=function(t){var e=this.options;return 0===e.length?t:e.filter(function(e){return e.value===t}).length>0?t:e[0].value},t}(),X=function(){function t(t){this.step=t}return t.prototype.constrain=function(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step},t}();function Q(t,e,n,r,i){return r+(t-e)/(n-e)*(i-r)}function J(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function W(t,e,n){return Math.min(Math.max(t,e),n)}function Z(t,e){return(t%e+e)%e}function tt(t){if(Array.isArray(t))return t;var e=[];return Object.keys(t).forEach(function(n){e.push({text:n,value:t[n]})}),e}function et(t){return"options"in t&&void 0!==t.options?new $(tt(i(t.options))):null}function nt(t){var e=t?Y(t,$):null;return e?e.options:null}function rt(t,e){var n=t&&Y(t,X);return n?J(n.step):Math.max(J(e),2)}function it(t){var e=function(t){var e=t?Y(t,X):null;return e?e.step:null}(t);return null!=e?e:1}function ot(t,e){var n,r=t&&Y(t,X),i=Math.abs(null!==(n=null==r?void 0:r.step)&&void 0!==n?n:e);return 0===i?.1:Math.pow(10,Math.floor(Math.log10(i))-1)}function at(t,e){t.viewProps||(t.viewProps=G(),console.warn("Missing controller.viewProps (plugin: '"+e+"')\nThis polyfill will be removed in the next major version."))}var st=function(t){function n(e,n){var r=t.call(this,e,n)||this;return r.binding=n.binding,_(r.viewProps,r.binding.ticker),x(r.viewProps,function(){r.binding.dispose()}),r}return e(n,t),n}(R);function lt(t,e){for(;t.length<e;)t.push(void 0)}function pt(t){var e=[];return lt(e,t),new T(e)}function ut(t,e){var n=r(function(t){var e=t.indexOf(void 0);return i(e<0?t:t.slice(0,e))}(t),[e]);return n.length>t.length?n.splice(0,n.length-t.length):lt(n,t.length),n}var dt=function(){function t(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new l,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}return t.prototype.dispose=function(){this.ticker.dispose()},t.prototype.read=function(){var t=this.target.read();if(void 0!==t){var e=this.value.rawValue,n=this.reader_(t);this.value.rawValue=ut(e,n),this.emitter.emit("update",{rawValue:n,sender:this})}},t.prototype.onTick_=function(t){this.read()},t}(),ct=function(){function t(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new l,this.interval_=e,this.setTimer_()}return Object.defineProperty(t.prototype,"disabled",{get:function(){return this.disabled_},set:function(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.clearTimer_()},t.prototype.clearTimer_=function(){if(null!==this.timerId_){var t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}},t.prototype.setTimer_=function(){if(this.clearTimer_(),!(this.interval_<=0)){var t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}},t.prototype.onTick_=function(){this.disabled_||this.emitter.emit("tick",{sender:this})},t}(),ht=function(){function t(){this.disabled=!1,this.emitter=new l}return t.prototype.dispose=function(){},t.prototype.tick=function(){this.disabled||this.emitter.emit("tick",{sender:this})},t}(),vt={monitor:{defaultInterval:200,defaultLineCount:3}};var ft=function(){function t(t){this.controller_=t}return Object.defineProperty(t.prototype,"disabled",{get:function(){return this.controller_.viewProps.get("disabled")},set:function(t){this.controller_.viewProps.set("disabled",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hidden",{get:function(){return this.controller_.viewProps.get("hidden")},set:function(t){this.controller_.viewProps.set("hidden",t)},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.controller_.viewProps.set("disposed",!0)},t}(),mt=function(){return function(t){this.target=t}}(),bt=function(t){function n(e,n,r){var i=t.call(this,e)||this;return i.value=n,i.presetKey=r,i}return e(n,t),n}(mt),gt=function(t){function n(e,n,r){var i=t.call(this,e)||this;return i.value=n,i.presetKey=r,i}return e(n,t),n}(mt),_t=function(t){function n(e,n){var r=t.call(this,e)||this;return r.expanded=n,r}return e(n,t),n}(mt),wt=function(t){function n(e){var n=t.call(this,e)||this;return n.onBindingChange_=n.onBindingChange_.bind(n),n.emitter_=new l,n.controller_.binding.emitter.on("change",n.onBindingChange_),n}return e(n,t),n.prototype.on=function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t.event)}),this},n.prototype.refresh=function(){this.controller_.binding.read()},n.prototype.onBindingChange_=function(t){var e=t.sender.target.read();this.emitter_.emit("change",{event:new bt(this,i(e),this.controller_.binding.target.presetKey)})},n}(ft),yt=function(t){function n(e){var n=t.call(this,e)||this;return n.onBindingUpdate_=n.onBindingUpdate_.bind(n),n.emitter_=new l,n.controller_.binding.emitter.on("update",n.onBindingUpdate_),n}return e(n,t),n.prototype.on=function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t.event)}),this},n.prototype.refresh=function(){this.controller_.binding.read()},n.prototype.onBindingUpdate_=function(t){var e=t.sender.target.read();this.emitter_.emit("update",{event:new gt(this,i(e),this.controller_.binding.target.presetKey)})},n}(ft);function xt(t){return function(e,n){if(n in e){var r=e[n];return t(r)?r:void 0}}}var Pt=xt(function(t){return"boolean"==typeof t}),Ct=xt(function(t){return"number"==typeof t}),kt=xt(function(t){return"string"==typeof t}),Et=xt(function(t){return"function"==typeof t});function Vt(t){return null!==t&&"object"==typeof t}var Lt=xt(Vt);var St,At=(St=Vt,xt(function(t){if(!Array.isArray(t))return!1;for(var e=0;e<t.length;e++)if(!St(t[e]))return!1;return!0}));var Mt=function(t){function n(e,n){var r=t.call(this,e)||this;return r.rackApi_=n,r}return e(n,t),n}(ft),Dt=function(){function t(t,e,n){this.obj_=t,this.key_=e,this.presetKey_=null!=n?n:e}return t.isBindable=function(t){return null!==t&&"object"==typeof t},Object.defineProperty(t.prototype,"key",{get:function(){return this.key_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"presetKey",{get:function(){return this.presetKey_},enumerable:!1,configurable:!0}),t.prototype.read=function(){return this.obj_[this.key_]},t.prototype.write=function(t){this.obj_[this.key_]=t},t.prototype.writeProperty=function(e,n){var r=this.read();if(!t.isBindable(r))throw s.notBindable();if(!(e in r))throw s.propertyNotFound(e);r[e]=n},t}();function jt(t,e,n){if(!Dt.isBindable(t))throw s.notBindable();return new Dt(t,e,n)}function Ot(t){"blade"===t.type?Gt.blades.unshift(t.plugin):"input"===t.type?Gt.inputs.unshift(t.plugin):"monitor"===t.type&&Gt.monitors.unshift(t.plugin)}var Nt=function(){function t(t){this.emitter=new l,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}return Object.defineProperty(t.prototype,"items",{get:function(){return this.items_},enumerable:!1,configurable:!0}),t.prototype.allItems=function(){return Array.from(this.cache_)},t.prototype.find=function(t){for(var e=0,n=this.allItems();e<n.length;e++){var r=n[e];if(t(r))return r}return null},t.prototype.includes=function(t){return this.cache_.has(t)},t.prototype.add=function(t,e){var n=this;if(this.includes(t))throw s.shouldNeverHappen();var r=void 0!==e?e:this.items_.length;this.items_.splice(r,0,t),this.cache_.add(t);var i=this.extract_(t);i&&(i.emitter.on("add",this.onSubListAdd_),i.emitter.on("remove",this.onSubListRemove_),i.allItems().forEach(function(t){n.cache_.add(t)})),this.emitter.emit("add",{index:r,item:t,root:this,target:this})},t.prototype.remove=function(t){var e=this.items_.indexOf(t);if(!(e<0)){this.items_.splice(e,1),this.cache_.delete(t);var n=this.extract_(t);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}},t.prototype.onSubListAdd_=function(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})},t.prototype.onSubListRemove_=function(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})},t}();function It(t){return t instanceof Ft?t.apiSet_:t instanceof Mt?t.rackApi_.apiSet_:null}function Bt(t,e){var n=t.find(function(t){return t.controller_===e});if(!n)throw s.shouldNeverHappen();return n}var Ft=function(t){function r(e){var n=t.call(this,e)||this;n.onRackAdd_=n.onRackAdd_.bind(n),n.onRackRemove_=n.onRackRemove_.bind(n),n.onRackInputChange_=n.onRackInputChange_.bind(n),n.onRackMonitorUpdate_=n.onRackMonitorUpdate_.bind(n),n.emitter_=new l,n.apiSet_=new Nt(It);var r=n.controller_.rack;return r.emitter.on("add",n.onRackAdd_),r.emitter.on("remove",n.onRackRemove_),r.emitter.on("inputchange",n.onRackInputChange_),r.emitter.on("monitorupdate",n.onRackMonitorUpdate_),r.children.forEach(function(t){n.setUpApi_(t)}),n}return e(r,t),Object.defineProperty(r.prototype,"children",{get:function(){var t=this;return this.controller_.rack.children.map(function(e){return Bt(t.apiSet_,e)})},enumerable:!1,configurable:!0}),r.prototype.addInput=function(t,e,n){var r=n||{},i=function(t,e,n){if(o(e.read()))throw new s({context:{key:e.key},type:"nomatchingcontroller"});var r=Gt.inputs.reduce(function(r,i){return r||function(t,e){var n=t.accept(e.target.read(),e.params);if(null===n)return null;var r={target:e.target,initialValue:n,params:e.params},i=t.binding.reader(r),o=t.binding.constraint?t.binding.constraint(r):void 0,a=new T(i(n),{constraint:o,equals:t.binding.equals}),s=new H({reader:i,target:e.target,value:a,writer:t.binding.writer(r)}),l=t.controller({constraint:o,document:e.document,initialValue:n,params:e.params,value:s.value,viewProps:G({disabled:e.params.disabled})});at(l,t.id);var u=new p;return new U(e.document,{binding:s,blade:u,props:new z({label:e.params.label||e.target.key}),valueController:l})}(i,{document:t,target:e,params:n})},null);if(r)return r;throw new s({context:{key:e.key},type:"nomatchingcontroller"})}(this.controller_.view.element.ownerDocument,jt(t,e,r.presetKey),r),a=new wt(i);return this.add(a,r.index)},r.prototype.addMonitor=function(t,e,n){var r=n||{},o=function(t,e,n){var r=Gt.monitors.reduce(function(r,i){return r||function(t,e){var n,r,i=t.accept(e.target.read(),e.params);if(null===i)return null;var o,a,s={target:e.target,initialValue:i,params:e.params},l=t.binding.reader(s),u=null!==(r=null!==(n=e.params.bufferSize)&&void 0!==n?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(e.params))&&void 0!==r?r:1,d=new dt({reader:l,target:e.target,ticker:(o=e.document,a=e.params.interval,0===a?new ht:new ct(o,null!=a?a:vt.monitor.defaultInterval)),value:pt(u)}),c=t.controller({document:e.document,params:e.params,value:d.value,viewProps:G({disabled:e.params.disabled})});at(c,t.id);var h=new p;return new st(e.document,{binding:d,blade:h,props:new z({label:e.params.label||e.target.key}),valueController:c})}(i,{document:t,params:n,target:e})},null);if(r)return r;throw new s({context:{key:e.key},type:"nomatchingcontroller"})}(this.controller_.view.element.ownerDocument,jt(t,e),r),a=new yt(o);return i(this.add(a,r.index))},r.prototype.addFolder=function(t){return function(t,e){return t.addBlade_v3_(n(n({},e),{view:"folder"}))}(this,t)},r.prototype.addButton=function(t){return function(t,e){return t.addBlade_v3_(n(n({},e),{view:"button"}))}(this,t)},r.prototype.addSeparator=function(t){return function(t,e){var r=e||{};return t.addBlade_v3_(n(n({},r),{view:"separator"}))}(this,t)},r.prototype.addTab=function(t){return function(t,e){return t.addBlade_v3_(n(n({},e),{view:"tab"}))}(this,t)},r.prototype.add=function(t,e){this.controller_.rack.add(t.controller_,e);var n=this.apiSet_.find(function(e){return e.controller_===t.controller_});return n&&this.apiSet_.remove(n),this.apiSet_.add(t),t},r.prototype.remove=function(t){this.controller_.rack.remove(t.controller_)},r.prototype.addBlade_v3_=function(t){var e=null!=t?t:{},r=qt(function(t,e){var r=Gt.blades.reduce(function(r,o){return r||function(t,e){var r=t.accept(e.params);if(!r)return null;var o=Pt(e.params,"disabled"),a=Pt(e.params,"hidden");return t.controller({blade:new p,document:e.document,params:i(n(n({},r.params),{disabled:o,hidden:a})),viewProps:G({disabled:o,hidden:a})})}(o,{document:t,params:e})},null);if(!r)throw new s({type:"nomatchingview",context:{params:e}});return r}(this.controller_.view.element.ownerDocument,e));return this.add(r,e.index)},r.prototype.on=function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t.event)}),this},r.prototype.setUpApi_=function(t){this.apiSet_.find(function(e){return e.controller_===t})||this.apiSet_.add(qt(t))},r.prototype.onRackAdd_=function(t){this.setUpApi_(t.bladeController)},r.prototype.onRackRemove_=function(t){if(t.isRoot){var e=Bt(this.apiSet_,t.bladeController);this.apiSet_.remove(e)}},r.prototype.onRackInputChange_=function(t){var e=Bt(this.apiSet_,t.bindingController),n=t.bindingController.binding;this.emitter_.emit("change",{event:new bt(e,i(n.target.read()),n.target.presetKey)})},r.prototype.onRackMonitorUpdate_=function(t){var e=Bt(this.apiSet_,t.bindingController),n=t.bindingController.binding;this.emitter_.emit("update",{event:new gt(e,i(n.target.read()),n.target.presetKey)})},r}(ft),Rt=function(){return function(t,e){var n=d(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),g(e.viewProps,this.element)}}(),Ut=function(t){function n(e){var n=t.call(this,{blade:e.blade,view:e.view,viewProps:e.rackController.viewProps})||this;return n.rackController=e.rackController,n}return e(n,t),n}(k);function Ht(t){return t instanceof zt?t.rack:t instanceof Ut?t.rackController.rack:null}function Tt(t){var e=Ht(t);return e?e.bcSet_:null}var Kt=function(){function t(t){var e;this.onBladeChange_=this.onBladeChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildLayout_=this.onChildLayout_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendaantMonitorUpdate_=this.onDescendaantMonitorUpdate_.bind(this),this.emitter=new l,this.blade_=null!=t?t:null,null===(e=this.blade_)||void 0===e||e.emitter.on("change",this.onBladeChange_),this.bcSet_=new Nt(Tt),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}return Object.defineProperty(t.prototype,"children",{get:function(){return this.bcSet_.items},enumerable:!1,configurable:!0}),t.prototype.add=function(t,e){t.parent&&t.parent.remove(t),t.parent_=this,this.bcSet_.add(t,e)},t.prototype.remove=function(t){t.parent_=null,this.bcSet_.remove(t)},t.prototype.find=function(t){return i(this.bcSet_.allItems().filter(function(e){return e instanceof t}))},t.prototype.onSetAdd_=function(t){this.updatePositions_();var e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,isRoot:e,sender:this}),e){var n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.emitter.on("change",this.onChildLayout_),x(n.viewProps,this.onChildDispose_),n instanceof U)n.binding.emitter.on("change",this.onChildInputChange_);else if(n instanceof st)n.binding.emitter.on("update",this.onChildMonitorUpdate_);else{var r=Ht(n);if(r){var i=r.emitter;i.on("layout",this.onDescendantLayout_),i.on("inputchange",this.onDescendantInputChange_),i.on("monitorupdate",this.onDescendaantMonitorUpdate_)}}}},t.prototype.onSetRemove_=function(t){this.updatePositions_();var e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,isRoot:e,sender:this}),e){var n=t.item;if(n instanceof U)n.binding.emitter.off("change",this.onChildInputChange_);else if(n instanceof st)n.binding.emitter.off("update",this.onChildMonitorUpdate_);else{var r=Ht(n);if(r){var i=r.emitter;i.off("layout",this.onDescendantLayout_),i.off("inputchange",this.onDescendantInputChange_),i.off("monitorupdate",this.onDescendaantMonitorUpdate_)}}}},t.prototype.updatePositions_=function(){var t=this,e=this.bcSet_.items.filter(function(t){return!t.viewProps.get("hidden")}),n=e[0],r=e[e.length-1];this.bcSet_.items.forEach(function(e){var i=[];e===n&&(i.push("first"),t.blade_&&!t.blade_.positions.includes("veryfirst")||i.push("veryfirst")),e===r&&(i.push("last"),t.blade_&&!t.blade_.positions.includes("verylast")||i.push("verylast")),e.blade.positions=i})},t.prototype.onChildLayout_=function(t){"positions"===t.propertyName&&(this.updatePositions_(),this.emitter.emit("layout",{sender:this}))},t.prototype.onChildViewPropsChange_=function(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},t.prototype.onChildDispose_=function(){var t=this;this.bcSet_.items.filter(function(t){return t.viewProps.get("disposed")}).forEach(function(e){t.bcSet_.remove(e)})},t.prototype.onChildInputChange_=function(t){var e=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r instanceof U&&r.binding===e)return r}return null}(this.find(U),t.sender);if(!e)throw s.shouldNeverHappen();this.emitter.emit("inputchange",{bindingController:e,sender:this})},t.prototype.onChildMonitorUpdate_=function(t){var e=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(r instanceof st&&r.binding===e)return r}return null}(this.find(st),t.sender);if(!e)throw s.shouldNeverHappen();this.emitter.emit("monitorupdate",{bindingController:e,sender:this})},t.prototype.onDescendantLayout_=function(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})},t.prototype.onDescendantInputChange_=function(t){this.emitter.emit("inputchange",{bindingController:t.bindingController,sender:this})},t.prototype.onDescendaantMonitorUpdate_=function(t){this.emitter.emit("monitorupdate",{bindingController:t.bindingController,sender:this})},t.prototype.onBladeChange_=function(t){"positions"===t.propertyName&&this.updatePositions_()},t}(),zt=function(t){function r(e,r){var i=t.call(this,n(n({},r),{view:new Rt(e,{viewName:"brk",viewProps:r.viewProps})}))||this;i.onRackAdd_=i.onRackAdd_.bind(i),i.onRackRemove_=i.onRackRemove_.bind(i);var o=new Kt(r.root?void 0:r.blade);return o.emitter.on("add",i.onRackAdd_),o.emitter.on("remove",i.onRackRemove_),i.rack=o,x(i.viewProps,function(){for(var t=i.rack.children.length-1;t>=0;t--){i.rack.children[t].viewProps.set("disposed",!0)}}),i}return e(r,t),r.prototype.onRackAdd_=function(t){t.isRoot&&j(this.view.element,t.bladeController.view.element,t.index)},r.prototype.onRackRemove_=function(t){t.isRoot&&O(t.bladeController.view.element)},r}(k),Gt={blades:[],inputs:[],monitors:[]};function qt(t){if(t instanceof U)return new wt(t);if(t instanceof st)return new yt(t);if(t instanceof zt)return new Ft(t);var e=Gt.blades.reduce(function(e,n){return e||n.api(t)},null);if(!e)throw s.shouldNeverHappen();return e}var Yt=d("lst"),$t=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(Yt()),g(e.viewProps,this.element);var n=t.createElement("select");n.classList.add(Yt("s")),b(this.props_,"options",function(e){N(n),e.forEach(function(e,r){var i=t.createElement("option");i.dataset.index=String(r),i.textContent=e.text,i.value=String(e.value),n.appendChild(i)})}),_(e.viewProps,n),this.element.appendChild(n),this.selectElement=n;var r=t.createElement("div");r.classList.add(Yt("m")),r.appendChild(D(t,"dropdown")),this.element.appendChild(r),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,this.update_()}return t.prototype.update_=function(){this.selectElement.value=String(this.value_.rawValue)},t.prototype.onValueChange_=function(){this.update_()},t}(),Xt=function(){function t(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new $t(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}return t.prototype.onSelectChange_=function(t){var e=i(t.currentTarget).selectedOptions.item(0);if(e){var n=Number(e.dataset.index);this.value.rawValue=this.props.get("options")[n].value}},t}(),Qt=function(t){function n(e){var n=t.call(this,e)||this;return n.emitter_=new l,n.controller_.valueController.value.emitter.on("change",function(t){n.emitter_.emit("change",{event:new bt(n,t.rawValue)})}),n}return e(n,t),Object.defineProperty(n.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"options",{get:function(){return this.controller_.valueController.props.get("options")},set:function(t){this.controller_.valueController.props.set("options",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.controller_.valueController.value.rawValue},set:function(t){this.controller_.valueController.value.rawValue=t},enumerable:!1,configurable:!0}),n.prototype.on=function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t.event)}),this},n}(ft),Jt={id:"list",accept:function(t){if("list"!==kt(t,"view"))return null;var e=t.value,n=Lt(t,"options");return o(e)||!n?null:{params:{label:kt(t,"label"),options:i(n),value:i(e),view:"list"}}},controller:function(t){var e=new Xt(t.document,{props:new z({options:tt(t.params.options)}),value:new K(t.params.value),viewProps:t.viewProps});return new R(t.document,{blade:t.blade,props:new z({label:t.params.label}),valueController:e})},api:function(t){return t instanceof R&&t.valueController instanceof Xt?new Qt(t):null}},Wt=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),Object.defineProperty(n.prototype,"disabled",{get:function(){return this.controller_.viewProps.get("disabled")},set:function(t){this.controller_.viewProps.set("disabled",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hidden",{get:function(){return this.controller_.viewProps.get("hidden")},set:function(t){this.controller_.viewProps.set("hidden",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.controller_.valueController.props.get("title")},set:function(t){this.controller_.valueController.props.set("title",t)},enumerable:!1,configurable:!0}),n.prototype.on=function(t,e){return this.controller_.valueController.emitter.on(t,i(e.bind(this))),this},n}(ft),Zt=d("btn"),te=function(){return function(t,e){this.element=t.createElement("div"),this.element.classList.add(Zt()),g(e.viewProps,this.element);var n=t.createElement("button");n.classList.add(Zt("b")),_(e.viewProps,n),y(e.props,"title",n),this.element.appendChild(n),this.buttonElement=n}}(),ee=function(){function t(t,e){this.emitter=new l,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new te(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return t.prototype.onClick_=function(){this.emitter.emit("click",{sender:this})},t}(),ne={id:"button",accept:function(t){if("button"!==kt(t,"view"))return null;var e=kt(t,"title");return void 0===e?null:{params:{label:kt(t,"label"),title:e,view:"button"}}},controller:function(t){return new R(t.document,{blade:t.blade,props:new z({label:t.params.label}),valueController:new ee(t.document,{props:new z({title:t.params.title}),viewProps:t.viewProps})})},api:function(t){return t instanceof R&&t.valueController instanceof ee?new Wt(t):null}},re=function(t){function n(e){var n=t.call(this,e,new Ft(e.rackController))||this;return n.onFolderChange_=n.onFolderChange_.bind(n),n.emitter_=new l,n.controller_.folder.emitter.on("change",n.onFolderChange_),n.rackApi_.on("change",function(t){n.emitter_.emit("change",{event:t})}),n.rackApi_.on("update",function(t){n.emitter_.emit("update",{event:t})}),n}return e(n,t),Object.defineProperty(n.prototype,"expanded",{get:function(){return this.controller_.folder.expanded},set:function(t){this.controller_.folder.expanded=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this.controller_.props.get("title")},set:function(t){this.controller_.props.set("title",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"children",{get:function(){return this.rackApi_.children},enumerable:!1,configurable:!0}),n.prototype.addInput=function(t,e,n){return this.rackApi_.addInput(t,e,n)},n.prototype.addMonitor=function(t,e,n){return this.rackApi_.addMonitor(t,e,n)},n.prototype.addFolder=function(t){return this.rackApi_.addFolder(t)},n.prototype.addButton=function(t){return this.rackApi_.addButton(t)},n.prototype.addSeparator=function(t){return this.rackApi_.addSeparator(t)},n.prototype.addTab=function(t){return this.rackApi_.addTab(t)},n.prototype.add=function(t,e){return this.rackApi_.add(t,e)},n.prototype.remove=function(t){this.rackApi_.remove(t)},n.prototype.addBlade_v3_=function(t){return this.rackApi_.addBlade_v3_(t)},n.prototype.on=function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t.event)}),this},n.prototype.onFolderChange_=function(t){"expanded"===t.propertyName&&this.emitter_.emit("fold",{event:new _t(this,t.sender.expanded)})},n}(Mt),ie=function(){function t(t){this.emitter=new l,this.expanded_=t,this.expandedHeight_=null,this.temporaryExpanded_=null,this.shouldFixHeight_=!1}return Object.defineProperty(t.prototype,"expanded",{get:function(){return this.expanded_},set:function(t){this.expanded_!==t&&(this.emitter.emit("beforechange",{propertyName:"expanded",sender:this}),this.expanded_=t,this.emitter.emit("change",{propertyName:"expanded",sender:this}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"temporaryExpanded",{get:function(){return this.temporaryExpanded_},set:function(t){this.temporaryExpanded_!==t&&(this.emitter.emit("beforechange",{propertyName:"temporaryExpanded",sender:this}),this.temporaryExpanded_=t,this.emitter.emit("change",{propertyName:"temporaryExpanded",sender:this}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"expandedHeight",{get:function(){return this.expandedHeight_},set:function(t){this.expandedHeight_!==t&&(this.emitter.emit("beforechange",{propertyName:"expandedHeight",sender:this}),this.expandedHeight_=t,this.emitter.emit("change",{propertyName:"expandedHeight",sender:this}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"shouldFixHeight",{get:function(){return this.shouldFixHeight_},set:function(t){this.shouldFixHeight_!==t&&(this.emitter.emit("beforechange",{propertyName:"shouldFixHeight",sender:this}),this.shouldFixHeight_=t,this.emitter.emit("change",{propertyName:"shouldFixHeight",sender:this}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styleExpanded",{get:function(){var t;return null!==(t=this.temporaryExpanded)&&void 0!==t?t:this.expanded},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"styleHeight",{get:function(){return this.styleExpanded?this.shouldFixHeight&&!o(this.expandedHeight)?this.expandedHeight+"px":"auto":"0"},enumerable:!1,configurable:!0}),t}(),oe=d("cnt"),ae=function(){function t(t,e){var n=this;this.onFolderChange_=this.onFolderChange_.bind(this),this.folder_=e.folder,this.folder_.emitter.on("change",this.onFolderChange_),this.className_=d(e.viewName||"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),oe()),g(e.viewProps,this.element);var r=t.createElement("button");r.classList.add(this.className_("b")),b(e.props,"title",function(t){o(t)?n.element.classList.add(n.className_(void 0,"not")):n.element.classList.remove(n.className_(void 0,"not"))}),_(e.viewProps,r),this.element.appendChild(r),this.buttonElement=r;var i=t.createElement("div");i.classList.add(this.className_("t")),y(e.props,"title",i),this.buttonElement.appendChild(i),this.titleElement=i;var a=t.createElement("div");a.classList.add(this.className_("m")),this.buttonElement.appendChild(a);var s=e.containerElement;s.classList.add(this.className_("c")),this.element.appendChild(s),this.containerElement=s,this.applyModel_()}return t.prototype.applyModel_=function(){var t=this.folder_.styleExpanded,e=this.className_(void 0,"expanded");t?this.element.classList.add(e):this.element.classList.remove(e),this.containerElement.style.height=this.folder_.styleHeight},t.prototype.onFolderChange_=function(){this.applyModel_()},t}();var se=function(t){function r(e,r){var i,o=this,a=new ie(null===(i=r.expanded)||void 0===i||i),s=new zt(e,{blade:r.blade,root:r.root,viewProps:r.viewProps});return(o=t.call(this,n(n({},r),{rackController:s,view:new ae(e,{containerElement:s.view.element,folder:a,props:r.props,viewName:r.root?"rot":void 0,viewProps:r.viewProps})}))||this).onContainerTransitionEnd_=o.onContainerTransitionEnd_.bind(o),o.onFolderBeforeChange_=o.onFolderBeforeChange_.bind(o),o.onTitleClick_=o.onTitleClick_.bind(o),o.props=r.props,o.folder=a,o.folder.emitter.on("beforechange",o.onFolderBeforeChange_),o.view.buttonElement.addEventListener("click",o.onTitleClick_),o.view.containerElement.addEventListener("transitionend",o.onContainerTransitionEnd_),o}return e(r,t),Object.defineProperty(r.prototype,"document",{get:function(){return this.view.element.ownerDocument},enumerable:!1,configurable:!0}),r.prototype.onFolderBeforeChange_=function(t){var e,n,r,i,a,s;"expanded"===t.propertyName&&(o(this.folder.expandedHeight)&&(this.folder.expandedHeight=(e=this.folder,n=this.view.containerElement,s=0,i=function(){e.expandedHeight=null,e.temporaryExpanded=!0,V(n),s=n.clientHeight,e.temporaryExpanded=null,V(n)},a=(r=n).style.transition,r.style.transition="none",i(),r.style.transition=a,s)),this.folder.shouldFixHeight=!0,V(this.view.containerElement))},r.prototype.onTitleClick_=function(){this.folder.expanded=!this.folder.expanded},r.prototype.onContainerTransitionEnd_=function(t){"height"===t.propertyName&&(this.folder.shouldFixHeight=!1,this.folder.expandedHeight=null)},r}(Ut),le={id:"button",accept:function(t){var e=kt(t,"title");return void 0===e||"folder"!==kt(t,"view")?null:{params:{expanded:Pt(t,"expanded"),title:e,view:"folder"}}},controller:function(t){return new se(t.document,{blade:t.blade,expanded:t.params.expanded,props:new z({title:t.params.title}),viewProps:t.viewProps})},api:function(t){return t instanceof se?new re(t):null}},pe=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return e(n,t),n}(ft),ue=d("spr"),de=function(){return function(t,e){this.element=t.createElement("div"),this.element.classList.add(ue()),g(e.viewProps,this.element);var n=t.createElement("hr");n.classList.add(ue("r")),this.element.appendChild(n)}}(),ce=function(t){function r(e,r){return t.call(this,n(n({},r),{view:new de(e,{viewProps:r.viewProps})}))||this}return e(r,t),r}(k),he={id:"separator",accept:function(t){return"separator"!==kt(t,"view")?null:{params:{view:"separator"}}},controller:function(t){return new ce(t.document,{blade:t.blade,viewProps:t.viewProps})},api:function(t){return t instanceof ce?new pe(t):null}};var ve=function(t){function n(e){return t.call(this,e)||this}return e(n,t),n.registerPlugin=function(t){Ot(t)},Object.defineProperty(n.prototype,"element",{get:function(){return this.controller_.view.element},enumerable:!1,configurable:!0}),n.prototype.importPreset=function(t){!function(t,e){t.forEach(function(t){var n=e[t.presetKey];void 0!==n&&t.write(n)})}(this.controller_.rackController.rack.find(U).map(function(t){return t.binding.target}),t),this.refresh()},n.prototype.exportPreset=function(){return function(t){return t.reduce(function(t,e){var n;return Object.assign(t,((n={})[e.presetKey]=e.read(),n))},{})}(this.controller_.rackController.rack.find(U).map(function(t){return t.binding.target}))},n.prototype.refresh=function(){this.controller_.rackController.rack.find(U).forEach(function(t){t.binding.read()}),this.controller_.rackController.rack.find(st).forEach(function(t){t.binding.read()})},n}(re);[ne,le,he].forEach(function(t){Ot({type:"blade",plugin:t})});var fe=function(t){function n(e,n){return t.call(this,e,{expanded:n.expanded,blade:n.blade,props:n.props,root:!0,viewProps:n.viewProps})||this}return e(n,t),n}(se),me=function(){function t(t){this.text=t}return t.prototype.evaluate=function(){return Number(this.text)},t.prototype.toString=function(){return this.text},t}(),be={"**":function(t,e){return Math.pow(t,e)},"*":function(t,e){return t*e},"/":function(t,e){return t/e},"%":function(t,e){return t%e},"+":function(t,e){return t+e},"-":function(t,e){return t-e},"<<":function(t,e){return t<<e},">>":function(t,e){return t>>e},">>>":function(t,e){return t>>>e},"&":function(t,e){return t&e},"^":function(t,e){return t^e},"|":function(t,e){return t|e}},ge=function(){function t(t,e,n){this.left=e,this.operator=t,this.right=n}return t.prototype.evaluate=function(){var t=be[this.operator];if(!t)throw new Error("unexpected binary operator: '"+this.operator);return t(this.left.evaluate(),this.right.evaluate())},t.prototype.toString=function(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")},t}(),_e={"+":function(t){return t},"-":function(t){return-t},"~":function(t){return~t}},we=function(){function t(t,e){this.operator=t,this.expression=e}return t.prototype.evaluate=function(){var t=_e[this.operator];if(!t)throw new Error("unexpected unary operator: '"+this.operator);return t(this.expression.evaluate())},t.prototype.toString=function(){return["u(",this.operator,this.expression.toString(),")"].join(" ")},t}();function ye(t){return function(e,n){for(var r=0;r<t.length;r++){var i=t[r](e,n);if(""!==i)return i}return""}}function xe(t,e){var n,r=t.substr(e).match(/^\s+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Pe(t,e){var n,r=t.substr(e).match(/^[0-9]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}function Ce(t,e){var n=t.substr(e,1);if(e+=1,"e"!==n.toLowerCase())return"";var r=function(t,e){var n=Pe(t,e);if(""!==n)return n;var r=t.substr(e,1);if("-"!==r&&"+"!==r)return"";var i=Pe(t,e+=1);return""===i?"":r+i}(t,e);return""===r?"":n+r}function ke(t,e){var n=t.substr(e,1);if("0"===n)return n;var r=function(t,e){var n=t.substr(e,1);return n.match(/^[1-9]$/)?n:""}(t,e);return e+=r.length,""===r?"":r+Pe(t,e)}var Ee=ye([function(t,e){var n=ke(t,e);if(e+=n.length,""===n)return"";var r=t.substr(e,1);if(e+=r.length,"."!==r)return"";var i=Pe(t,e);return n+r+i+Ce(t,e+=i.length)},function(t,e){var n=t.substr(e,1);if(e+=n.length,"."!==n)return"";var r=Pe(t,e);return e+=r.length,""===r?"":n+r+Ce(t,e)},function(t,e){var n=ke(t,e);return e+=n.length,""===n?"":n+Ce(t,e)}]);var Ve=ye([function(t,e){var n=t.substr(e,2);if(e+=n.length,"0b"!==n.toLowerCase())return"";var r=function(t,e){var n,r=t.substr(e).match(/^[01]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}(t,e);return""===r?"":n+r},function(t,e){var n=t.substr(e,2);if(e+=n.length,"0o"!==n.toLowerCase())return"";var r=function(t,e){var n,r=t.substr(e).match(/^[0-7]+/);return null!==(n=r&&r[0])&&void 0!==n?n:""}(t,e);return""===r?"":n+r},function(t,e){var n=t.substr(e,2);if(e+=n.length,"0x"!==n.toLowerCase())return"";var r=function(t,e){var n,r=t.substr(e).match(/^[0-9a-f]+/i);return null!==(n=r&&r[0])&&void 0!==n?n:""}(t,e);return""===r?"":n+r}]),Le=ye([Ve,Ee]);function Se(t,e){return function(t,e){var n=Le(t,e);return e+=n.length,""===n?null:{evaluable:new me(n),cursor:e}}(t,e)||function(t,e){var n=t.substr(e,1);if(e+=n.length,"("!==n)return null;var r=De(t,e);if(!r)return null;e=r.cursor,e+=xe(t,e).length;var i=t.substr(e,1);return e+=i.length,")"!==i?null:{evaluable:r.evaluable,cursor:e}}(t,e)}function Ae(t,e,n){n+=xe(e,n).length;var r=t.filter(function(t){return e.startsWith(t,n)})[0];return r?(n+=r.length,{cursor:n+=xe(e,n).length,operator:r}):null}var Me=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(function(t,e){return function(t,e){return function(n,r){var i=t(n,r);if(!i)return null;r=i.cursor;for(var o=i.evaluable;;){var a=Ae(e,n,r);if(!a)break;r=a.cursor;var s=t(n,r);if(!s)return null;r=s.cursor,o=new ge(a.operator,o,s.evaluable)}return o?{cursor:r,evaluable:o}:null}}(t,e)},function t(e,n){var r=Se(e,n);if(r)return r;var i=e.substr(n,1);if(n+=i.length,"+"!==i&&"-"!==i&&"~"!==i)return null;var o=t(e,n);return o?{cursor:n=o.cursor,evaluable:new we(i,o.evaluable)}:null});function De(t,e){return e+=xe(t,e).length,Me(t,e)}function je(t){var e,n=function(t){var e=De(t,0);return e?e.cursor+xe(t,e.cursor).length!==t.length?null:e.evaluable:null}(t);return null!==(e=null==n?void 0:n.evaluate())&&void 0!==e?e:null}function Oe(t){if("number"==typeof t)return t;if("string"==typeof t){var e=je(t);if(!o(e))return e}return 0}function Ne(t){return String(t)}function Ie(t){return function(e){return e.toFixed(Math.max(Math.min(t,20),0))}}var Be=d("sldtxt"),Fe=function(){return function(t,e){this.element=t.createElement("div"),this.element.classList.add(Be());var n=t.createElement("div");n.classList.add(Be("s")),this.sliderView_=e.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);var r=t.createElement("div");r.classList.add(Be("t")),this.textView_=e.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}}();function Re(t,e){var n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function Ue(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function He(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function Te(t){return function(t){return"ArrowUp"===t||"ArrowDown"===t}(t)||"ArrowLeft"===t||"ArrowRight"===t}function Ke(t,e){var n=e.ownerDocument.defaultView,r=e.getBoundingClientRect();return{x:t.pageX-((n&&n.scrollX||0)+r.left),y:t.pageY-((n&&n.scrollY||0)+r.top)}}var ze=function(){function t(t){this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=t,this.emitter=new l,L(this.elem_.ownerDocument)?(t.addEventListener("touchstart",this.onTouchStart_),t.addEventListener("touchmove",this.onTouchMove_),t.addEventListener("touchend",this.onTouchEnd_)):t.addEventListener("mousedown",this.onMouseDown_)}return t.prototype.computePosition_=function(t){var e=this.elem_.getBoundingClientRect();return{bounds:{width:e.width,height:e.height},point:t?{x:t.x,y:t.y}:null}},t.prototype.onMouseDown_=function(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();var n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{data:this.computePosition_(Ke(t,this.elem_)),sender:this})},t.prototype.onDocumentMouseMove_=function(t){this.emitter.emit("move",{data:this.computePosition_(Ke(t,this.elem_)),sender:this})},t.prototype.onDocumentMouseUp_=function(t){var e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{data:this.computePosition_(Ke(t,this.elem_)),sender:this})},t.prototype.onTouchStart_=function(t){t.preventDefault();var e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("down",{data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this})},t.prototype.onTouchMove_=function(t){var e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("move",{data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this})},t.prototype.onTouchEnd_=function(t){var e=t.targetTouches.item(0),n=this.elem_.getBoundingClientRect();this.emitter.emit("up",{data:this.computePosition_(e?{x:e.clientX-n.left,y:e.clientY-n.top}:void 0),sender:this})},t}(),Ge=d("txt"),qe=function(){function t(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Ge(),Ge(void 0,"num")),e.arrayPosition&&this.element.classList.add(Ge(void 0,e.arrayPosition)),g(e.viewProps,this.element);var n=t.createElement("input");n.classList.add(Ge("i")),n.type="text",_(e.viewProps,n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(Ge()),this.inputElement.classList.add(Ge("i"));var r=t.createElement("div");r.classList.add(Ge("k")),this.element.appendChild(r),this.knobElement=r;var i=t.createElementNS(E,"svg");i.classList.add(Ge("g")),this.knobElement.appendChild(i);var o=t.createElementNS(E,"path");o.classList.add(Ge("gb")),i.appendChild(o),this.guideBodyElem_=o;var a=t.createElementNS(E,"path");a.classList.add(Ge("gh")),i.appendChild(a),this.guideHeadElem_=a;var s=t.createElement("div");s.classList.add(d("tt")()),this.knobElement.appendChild(s),this.tooltipElem_=s,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}return t.prototype.onDraggingChange_=function(t){if(null!==t.rawValue){this.element.classList.add(Ge(void 0,"drg"));var e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),r=W(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",["M "+(n+r)+",0 L"+n+",4 L"+(n+r)+",8","M "+e+",-1 L"+e+",9"].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d","M 0,4 L"+e+",4");var i=this.props_.get("formatter");this.tooltipElem_.textContent=i(this.value.rawValue),this.tooltipElem_.style.left=e+"px"}else this.element.classList.remove(Ge(void 0,"drg"))},t.prototype.refresh=function(){var t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)},t.prototype.onChange_=function(){this.refresh()},t}(),Ye=function(){function t(t,e){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=new T(null),this.view=new qe(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_);var n=new ze(this.view.knobElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}return t.prototype.onInputChange_=function(t){var e=i(t.currentTarget).value,n=this.parser_(e);o(n)||(this.value.rawValue=n),this.view.refresh()},t.prototype.onInputKeyDown_=function(t){var e=Re(this.baseStep_,Ue(t));0!==e&&(this.value.rawValue+=e)},t.prototype.onPointerDown_=function(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0},t.prototype.onPointerMove_=function(t){if(t.data.point){var e=t.data.point.x-t.data.bounds.width/2;this.value.rawValue=this.originRawValue_+e*this.props.get("draggingScale"),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_}},t.prototype.onPointerUp_=function(){this.dragging_.rawValue=null},t}(),$e=d("sld"),Xe=function(){function t(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add($e()),g(e.viewProps,this.element);var n=t.createElement("div");n.classList.add($e("t")),w(e.viewProps,n),this.element.appendChild(n),this.trackElement=n;var r=t.createElement("div");r.classList.add($e("k")),this.trackElement.appendChild(r),this.knobElement=r,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}return t.prototype.update_=function(){var t=W(Q(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=t+"%"},t.prototype.onChange_=function(){this.update_()},t}(),Qe=function(){function t(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onPoint_=this.onPoint_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new Xe(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ze(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPoint_),this.ptHandler_.emitter.on("move",this.onPoint_),this.ptHandler_.emitter.on("up",this.onPoint_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_)}return t.prototype.handlePointerEvent_=function(t){t.point&&(this.value.rawValue=Q(W(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("minValue"),this.props.get("maxValue")))},t.prototype.onPoint_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onKeyDown_=function(t){this.value.rawValue+=Re(this.baseStep_,He(t))},t}(),Je=function(){function t(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new Qe(t,{baseStep:e.baseStep,props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new Ye(t,{baseStep:e.baseStep,parser:e.parser,props:e.textProps,value:e.value,viewProps:e.viewProps}),this.view=new Fe(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}return Object.defineProperty(t.prototype,"sliderController",{get:function(){return this.sliderC_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textController",{get:function(){return this.textC_},enumerable:!1,configurable:!0}),t}(),We=function(t){function n(e){var n=t.call(this,e)||this;return n.emitter_=new l,n.controller_.valueController.value.emitter.on("change",function(t){n.emitter_.emit("change",{event:new bt(n,t.rawValue)})}),n}return e(n,t),Object.defineProperty(n.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"maxValue",{get:function(){return this.controller_.valueController.sliderController.props.get("maxValue")},set:function(t){this.controller_.valueController.sliderController.props.set("maxValue",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"minValue",{get:function(){return this.controller_.valueController.sliderController.props.get("minValue")},set:function(t){this.controller_.valueController.sliderController.props.set("minValue",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.controller_.valueController.value.rawValue},set:function(t){this.controller_.valueController.value.rawValue=t},enumerable:!1,configurable:!0}),n.prototype.on=function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t.event)}),this},n}(ft),Ze={id:"slider",accept:function(t){if("slider"!==kt(t,"view"))return null;var e=Ct(t,"max"),n=Ct(t,"min");return void 0===e||void 0===n?null:{params:{format:i(Et(t,"format")),label:kt(t,"label"),max:e,min:n,value:Ct(t,"value"),view:"slider"}}},controller:function(t){var e,n,r=null!==(e=t.params.value)&&void 0!==e?e:0,i=new Je(t.document,{baseStep:1,parser:je,sliderProps:new z({maxValue:t.params.max,minValue:t.params.min}),textProps:new z({draggingScale:ot(void 0,r),formatter:null!==(n=t.params.format)&&void 0!==n?n:Ne}),value:new K(r),viewProps:t.viewProps});return new R(t.document,{blade:t.blade,props:new z({label:t.params.label}),valueController:i})},api:function(t){return t instanceof R&&t.valueController instanceof Je?new We(t):null}},tn=d("tbi"),en=function(){return function(t,e){var n=this;this.element=t.createElement("div"),this.element.classList.add(tn()),g(e.viewProps,this.element),b(e.props,"selected",function(t){t?n.element.classList.add(tn(void 0,"sel")):n.element.classList.remove(tn(void 0,"sel"))});var r=t.createElement("button");r.classList.add(tn("b")),_(e.viewProps,r),this.element.appendChild(r),this.buttonElement=r;var i=t.createElement("div");i.classList.add(tn("t")),y(e.props,"title",i),this.buttonElement.appendChild(i),this.titleElement=i}}(),nn=function(){function t(t,e){this.emitter=new l,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new en(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}return t.prototype.onClick_=function(){this.emitter.emit("click",{sender:this})},t}(),rn=function(){function t(t,e){var n=this;this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new nn(t,{props:e.itemProps,viewProps:G()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new zt(t,{blade:new p,viewProps:G()}),this.props=e.props,b(this.props,"selected",function(t){n.itemController.props.set("selected",t),n.contentController.viewProps.set("hidden",!t)})}return Object.defineProperty(t.prototype,"itemController",{get:function(){return this.ic_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"contentController",{get:function(){return this.cc_},enumerable:!1,configurable:!0}),t.prototype.onItemClick_=function(){this.props.set("selected",!0)},t}(),on=function(){function t(t,e){this.controller_=t,this.rackApi_=e}return Object.defineProperty(t.prototype,"title",{get:function(){return this.controller_.itemController.props.get("title")},set:function(t){this.controller_.itemController.props.set("title",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selected",{get:function(){return this.controller_.props.get("selected")},set:function(t){this.controller_.props.set("selected",t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"children",{get:function(){return this.rackApi_.children},enumerable:!1,configurable:!0}),t.prototype.addButton=function(t){return this.rackApi_.addButton(t)},t.prototype.addFolder=function(t){return this.rackApi_.addFolder(t)},t.prototype.addSeparator=function(t){return this.rackApi_.addSeparator(t)},t.prototype.addTab=function(t){return this.rackApi_.addTab(t)},t.prototype.add=function(t,e){this.rackApi_.add(t,e)},t.prototype.remove=function(t){this.rackApi_.remove(t)},t.prototype.addInput=function(t,e,n){return this.rackApi_.addInput(t,e,n)},t.prototype.addMonitor=function(t,e,n){return this.rackApi_.addMonitor(t,e,n)},t.prototype.addBlade_v3_=function(t){return this.rackApi_.addBlade_v3_(t)},t}(),an=function(t){function n(e){var n=t.call(this,e,new Ft(e.rackController))||this;return n.onPageAdd_=n.onPageAdd_.bind(n),n.onPageRemove_=n.onPageRemove_.bind(n),n.emitter_=new l,n.pageApiMap_=new Map,n.rackApi_.on("change",function(t){n.emitter_.emit("change",{event:t})}),n.rackApi_.on("update",function(t){n.emitter_.emit("update",{event:t})}),n.controller_.pageSet.emitter.on("add",n.onPageAdd_),n.controller_.pageSet.emitter.on("remove",n.onPageRemove_),n.controller_.pageSet.items.forEach(function(t){n.setUpPageApi_(t)}),n}return e(n,t),Object.defineProperty(n.prototype,"pages",{get:function(){var t=this;return this.controller_.pageSet.items.map(function(e){var n=t.pageApiMap_.get(e);if(!n)throw s.shouldNeverHappen();return n})},enumerable:!1,configurable:!0}),n.prototype.addPage=function(t){var e=this.controller_.view.element.ownerDocument,n=new rn(e,{itemProps:new z({selected:!1,title:t.title}),props:new z({selected:!1})});this.controller_.add(n,t.index);var r=this.pageApiMap_.get(n);if(!r)throw s.shouldNeverHappen();return r},n.prototype.removePage=function(t){this.controller_.remove(t)},n.prototype.on=function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t.event)}),this},n.prototype.setUpPageApi_=function(t){var e=this.rackApi_.apiSet_.find(function(e){return e.controller_===t.contentController});if(!e)throw s.shouldNeverHappen();var n=new on(t,e);this.pageApiMap_.set(t,n)},n.prototype.onPageAdd_=function(t){this.setUpPageApi_(t.item)},n.prototype.onPageRemove_=function(t){if(!this.pageApiMap_.get(t.item))throw s.shouldNeverHappen();this.pageApiMap_.delete(t.item)},n}(Mt),sn=d("tab"),ln=function(){return function(t,e){this.element=t.createElement("div"),this.element.classList.add(sn(),oe()),g(e.viewProps,this.element),m(e.empty,h(this.element,sn(void 0,"nop")));var n=t.createElement("div");n.classList.add(sn("i")),this.element.appendChild(n),this.itemsElement=n;var r=e.contentsElement;r.classList.add(sn("c")),this.element.appendChild(r),this.contentsElement=r}}(),pn=function(t){function n(e,n){var r=this,i=new zt(e,{blade:n.blade,viewProps:n.viewProps}),o=new K(!0);return(r=t.call(this,{blade:n.blade,rackController:i,view:new ln(e,{contentsElement:i.view.element,empty:o,viewProps:n.viewProps})})||this).onPageAdd_=r.onPageAdd_.bind(r),r.onPageRemove_=r.onPageRemove_.bind(r),r.onPageSelectedChange_=r.onPageSelectedChange_.bind(r),r.pageSet_=new Nt(function(){return null}),r.pageSet_.emitter.on("add",r.onPageAdd_),r.pageSet_.emitter.on("remove",r.onPageRemove_),r.empty_=o,r.applyPages_(),r}return e(n,t),Object.defineProperty(n.prototype,"pageSet",{get:function(){return this.pageSet_},enumerable:!1,configurable:!0}),n.prototype.add=function(t,e){this.pageSet_.add(t,null!=e?e:this.pageSet_.items.length)},n.prototype.remove=function(t){this.pageSet_.remove(this.pageSet_.items[t])},n.prototype.applyPages_=function(){this.keepSelection_(),this.empty_.rawValue=0===this.pageSet_.items.length},n.prototype.onPageAdd_=function(t){var e=t.item;j(this.view.itemsElement,e.itemController.view.element,t.index),this.rackController.rack.add(e.contentController,t.index),e.props.value("selected").emitter.on("change",this.onPageSelectedChange_),this.applyPages_()},n.prototype.onPageRemove_=function(t){var e=t.item;O(e.itemController.view.element),this.rackController.rack.remove(e.contentController),e.props.value("selected").emitter.off("change",this.onPageSelectedChange_),this.applyPages_()},n.prototype.keepSelection_=function(){if(0!==this.pageSet_.items.length){var t=this.pageSet_.items.findIndex(function(t){return t.props.get("selected")});t<0?this.pageSet_.items.forEach(function(t,e){t.props.set("selected",0===e)}):this.pageSet_.items.forEach(function(e,n){e.props.set("selected",n===t)})}},n.prototype.onPageSelectedChange_=function(t){if(t.rawValue){var e=this.pageSet_.items.findIndex(function(e){return e.props.value("selected")===t.sender});this.pageSet_.items.forEach(function(t,n){t.props.set("selected",n===e)})}else this.keepSelection_()},n}(Ut),un={id:"tab",accept:function(t){var e=At(t,"pages");if("tab"!==kt(t,"view")||!e)return null;for(var n=[],r=0;r<e.length;r++){var i=kt(e[r],"title");if(o(i))return null;n.push({title:i})}return 0===n.length?null:{params:{pages:n,view:"tab"}}},controller:function(t){var e=new pn(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach(function(n){var r=new rn(t.document,{itemProps:new z({selected:!1,title:n.title}),props:new z({selected:!1})});e.add(r)}),e},api:function(t){return t instanceof pn?new an(t):null}},dn=d("txt"),cn=function(){function t(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(dn()),g(e.viewProps,this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);var n=t.createElement("input");n.classList.add(dn("i")),n.type="text",_(e.viewProps,n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}return t.prototype.refresh=function(){var t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)},t.prototype.onChange_=function(){this.refresh()},t}(),hn=function(){function t(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new cn(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return t.prototype.onInputChange_=function(t){var e=i(t.currentTarget).value,n=this.parser_(e);o(n)||(this.value.rawValue=n),this.view.refresh()},t}(),vn=function(t){function n(e){var n=t.call(this,e)||this;return n.emitter_=new l,n.controller_.valueController.value.emitter.on("change",function(t){n.emitter_.emit("change",{event:new bt(n,t.rawValue)})}),n}return e(n,t),Object.defineProperty(n.prototype,"label",{get:function(){return this.controller_.props.get("label")},set:function(t){this.controller_.props.set("label",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"formatter",{get:function(){return this.controller_.valueController.props.get("formatter")},set:function(t){this.controller_.valueController.props.set("formatter",t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this.controller_.valueController.value.rawValue},set:function(t){this.controller_.valueController.value.rawValue=t},enumerable:!1,configurable:!0}),n.prototype.on=function(t,e){var n=e.bind(this);return this.emitter_.on(t,function(t){n(t.event)}),this},n}(ft),fn={id:"text",accept:function(t){if("text"!==kt(t,"view"))return null;var e=Et(t,"parse"),n=t.value;return e&&n?{params:{format:i(Et(t,"format")),label:kt(t,"label"),parse:i(e),value:i(n),view:"text"}}:null},controller:function(t){var e,n=new hn(t.document,{parser:t.params.parse,props:new z({formatter:null!==(e=t.params.format)&&void 0!==e?e:function(t){return String(t)}}),value:new K(t.params.value),viewProps:t.viewProps});return new R(t.document,{blade:t.blade,props:new z({label:t.params.label}),valueController:n})},api:function(t){return t instanceof R&&t.valueController instanceof hn?new vn(t):null}};function mn(t){return"false"!==t&&!!t}function bn(t){return function(t){return String(t)}(t)}function gn(t,e){t.write(e)}var _n=d("ckb"),wn=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(_n()),g(e.viewProps,this.element);var n=t.createElement("label");n.classList.add(_n("l")),this.element.appendChild(n);var r=t.createElement("input");r.classList.add(_n("i")),r.type="checkbox",n.appendChild(r),this.inputElement=r,_(e.viewProps,this.inputElement);var i=t.createElement("div");i.classList.add(_n("w")),n.appendChild(i);var o=D(t,"check");i.appendChild(o),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}return t.prototype.update_=function(){this.inputElement.checked=this.value.rawValue},t.prototype.onValueChange_=function(){this.update_()},t}(),yn=function(){function t(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new wn(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}return t.prototype.onInputChange_=function(t){var e=i(t.currentTarget);this.value.rawValue=e.checked},t}();var xn={id:"input-bool",accept:function(t){return"boolean"==typeof t?t:null},binding:{reader:function(t){return mn},constraint:function(t){return e=t.params,n=[],(r=et(e))&&n.push(r),new q(n);var e,n,r},writer:function(t){return gn}},controller:function(t){var e,n=t.document,r=t.value,i=t.constraint;return i&&Y(i,$)?new Xt(n,{props:new z({options:null!==(e=nt(i))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps}):new yn(n,{value:r,viewProps:t.viewProps})}},Pn=d("clswtxt"),Cn=function(){return function(t,e){this.element=t.createElement("div"),this.element.classList.add(Pn());var n=t.createElement("div");n.classList.add(Pn("s")),this.swatchView_=e.swatchView,n.appendChild(this.swatchView_.element),this.element.appendChild(n);var r=t.createElement("div");r.classList.add(Pn("t")),this.textView=e.textView,r.appendChild(this.textView.element),this.element.appendChild(r)}}(),kn=function(){function t(t){this.onValueChange_=this.onValueChange_.bind(this),this.mode_=t.rawValue.mode,this.value=t,this.value.emitter.on("change",this.onValueChange_),this.emitter=new l}return Object.defineProperty(t.prototype,"mode",{get:function(){return this.mode_},set:function(t){this.mode_!==t&&(this.mode_=t,this.emitter.emit("change",{propertyName:"mode",sender:this}))},enumerable:!1,configurable:!0}),t.prototype.onValueChange_=function(){this.emitter.emit("change",{propertyName:"value",sender:this})},t}(),En=Ie(0);function Vn(t){return En(t)+"%"}function Ln(t,e,n){var r,i,o,a,s,l,p,u,d,c=Z(t,360),h=W(e/100,0,1),v=W(n/100,0,1),f=v*h,m=f*(1-Math.abs(c/60%2-1)),b=v-f;return c>=0&&c<60?(p=(r=[f,m,0])[0],u=r[1],d=r[2]):c>=60&&c<120?(p=(i=[m,f,0])[0],u=i[1],d=i[2]):c>=120&&c<180?(p=(o=[0,f,m])[0],u=o[1],d=o[2]):c>=180&&c<240?(p=(a=[0,m,f])[0],u=a[1],d=a[2]):c>=240&&c<300?(p=(s=[m,0,f])[0],u=s[1],d=s[2]):(p=(l=[f,0,m])[0],u=l[1],d=l[2]),[255*(p+b),255*(u+b),255*(d+b)]}function Sn(t){return[t[0],t[1],t[2]]}function An(t,e){return[t[0],t[1],t[2],e]}var Mn={hsl:{hsl:function(t,e,n){return[t,e,n]},hsv:function(t,e,n){var r=n+e*(100-Math.abs(2*n-100))/200;return[t,0!==r?e*(100-Math.abs(2*n-100))/r:0,n+e*(100-Math.abs(2*n-100))/200]},rgb:function(t,e,n){var r,i,o,a,s,l,p,u,d,c=(t%360+360)%360,h=W(e/100,0,1),v=W(n/100,0,1),f=(1-Math.abs(2*v-1))*h,m=f*(1-Math.abs(c/60%2-1)),b=v-f/2;return c>=0&&c<60?(p=(r=[f,m,0])[0],u=r[1],d=r[2]):c>=60&&c<120?(p=(i=[m,f,0])[0],u=i[1],d=i[2]):c>=120&&c<180?(p=(o=[0,f,m])[0],u=o[1],d=o[2]):c>=180&&c<240?(p=(a=[0,m,f])[0],u=a[1],d=a[2]):c>=240&&c<300?(p=(s=[m,0,f])[0],u=s[1],d=s[2]):(p=(l=[f,0,m])[0],u=l[1],d=l[2]),[255*(p+b),255*(u+b),255*(d+b)]}},hsv:{hsl:function(t,e,n){var r=100-Math.abs(n*(200-e)/100-100);return[t,0!==r?e*n/r:0,n*(200-e)/200]},hsv:function(t,e,n){return[t,e,n]},rgb:Ln},rgb:{hsl:function(t,e,n){var r=W(t/255,0,1),i=W(e/255,0,1),o=W(n/255,0,1),a=Math.max(r,i,o),s=Math.min(r,i,o),l=a-s,p=0,u=0,d=(s+a)/2;return 0!==l&&(u=l/(1-Math.abs(a+s-1)),p=(p=r===a?(i-o)/l:i===a?2+(o-r)/l:4+(r-i)/l)/6+(p<0?1:0)),[360*p,100*u,100*d]},hsv:function(t,e,n){var r=W(t/255,0,1),i=W(e/255,0,1),o=W(n/255,0,1),a=Math.max(r,i,o),s=a-Math.min(r,i,o);return[0===s?0:a===r?((i-o)/s%6+6)%6*60:a===i?60*((o-r)/s+2):60*((r-i)/s+4),100*(0===a?0:s/a),100*a]},rgb:function(t,e,n){return[t,e,n]}}};var Dn={hsl:function(t){var e;return[Z(t[0],360),W(t[1],0,100),W(t[2],0,100),W(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},hsv:function(t){var e;return[Z(t[0],360),W(t[1],0,100),W(t[2],0,100),W(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},rgb:function(t){var e;return[W(t[0],0,255),W(t[1],0,255),W(t[2],0,255),W(null!==(e=t[3])&&void 0!==e?e:1,0,1)]}};function jn(t,e){return"object"==typeof t&&!o(t)&&(e in t&&"number"==typeof t[e])}var On=function(){function t(t,e){this.mode_=e,this.comps_=Dn[e](t)}return t.black=function(){return new t([0,0,0],"rgb")},t.fromObject=function(e){return new t("a"in e?[e.r,e.g,e.b,e.a]:[e.r,e.g,e.b],"rgb")},t.toRgbaObject=function(t){return t.toRgbaObject()},t.isRgbColorObject=function(t){return jn(t,"r")&&jn(t,"g")&&jn(t,"b")},t.isRgbaColorObject=function(t){return this.isRgbColorObject(t)&&jn(t,"a")},t.isColorObject=function(t){return this.isRgbColorObject(t)},t.equals=function(t,e){if(t.mode_!==e.mode_)return!1;for(var n=t.comps_,r=e.comps_,i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0},Object.defineProperty(t.prototype,"mode",{get:function(){return this.mode_},enumerable:!1,configurable:!0}),t.prototype.getComponents=function(t){return An((e=Sn(this.comps_),n=this.mode_,r=t||this.mode_,(i=Mn[n])[r].apply(i,e)),this.comps_[3]);var e,n,r,i},t.prototype.toRgbaObject=function(){var t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}},t}();function Nn(t,e){var n=t.match(/^(.+)%$/);return n?Math.min(.01*parseFloat(n[1])*e,e):Math.min(parseFloat(t),e)}var In={deg:function(t){return t},grad:function(t){return 360*t/400},rad:function(t){return 360*t/(2*Math.PI)},turn:function(t){return 360*t}};function Bn(t){var e=t.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!e)return parseFloat(t);var n=parseFloat(e[1]),r=e[2];return In[r](n)}var Fn={"func.rgb":function(t){var e=t.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[Nn(e[1],255),Nn(e[2],255),Nn(e[3],255)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new On(n,"rgb")},"func.rgba":function(t){var e=t.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[Nn(e[1],255),Nn(e[2],255),Nn(e[3],255),Nn(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new On(n,"rgb")},"func.hsl":function(t){var e=t.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[Bn(e[1]),Nn(e[2],100),Nn(e[3],100)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:new On(n,"hsl")},"func.hsla":function(t){var e=t.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!e)return null;var n=[Bn(e[1]),Nn(e[2],100),Nn(e[3],100),Nn(e[4],1)];return isNaN(n[0])||isNaN(n[1])||isNaN(n[2])||isNaN(n[3])?null:new On(n,"hsl")},"hex.rgb":function(t){var e=t.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new On([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)],"rgb");var n=t.match(/^#([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new On([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)],"rgb"):null},"hex.rgba":function(t){var e=t.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(e)return new On([parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16),Q(parseInt(e[4]+e[4],16),0,255,0,1)],"rgb");var n=t.match(/^#?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return n?new On([parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),Q(parseInt(n[4],16),0,255,0,1)],"rgb"):null}};function Rn(t){return Object.keys(Fn).reduce(function(e,n){return e||((0,Fn[n])(t)?n:null)},null)}var Un=function(t){var e=Rn(t);return e?Fn[e](t):null};function Hn(t){return"func.hsla"===t||"func.rgba"===t||"hex.rgba"===t}function Tn(t){if("string"==typeof t){var e=Un(t);if(e)return e}return On.black()}function Kn(t){var e=W(Math.floor(t),0,255).toString(16);return 1===e.length?"0"+e:e}function zn(t){return"#"+Sn(t.getComponents("rgb")).map(Kn).join("")}function Gn(t){var e=t.getComponents("rgb");return"#"+[e[0],e[1],e[2],255*e[3]].map(Kn).join("")}function qn(t){var e=Ie(0);return"rgb("+Sn(t.getComponents("rgb")).map(function(t){return e(t)}).join(", ")+")"}function Yn(t){var e=Ie(2),n=Ie(0);return"rgba("+t.getComponents("rgb").map(function(t,r){return(3===r?e:n)(t)}).join(", ")+")"}var $n={"func.hsl":function(t){var e=[Ie(0),Vn,Vn];return"hsl("+Sn(t.getComponents("hsl")).map(function(t,n){return e[n](t)}).join(", ")+")"},"func.hsla":function(t){var e=[Ie(0),Vn,Vn,Ie(2)];return"hsla("+t.getComponents("hsl").map(function(t,n){return e[n](t)}).join(", ")+")"},"func.rgb":qn,"func.rgba":Yn,"hex.rgb":zn,"hex.rgba":Gn};function Xn(t){return $n[t]}var Qn=d("clsw"),Jn=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(Qn()),g(e.viewProps,this.element);var n=t.createElement("div");n.classList.add(Qn("sw")),this.element.appendChild(n),this.swatchElem_=n;var r=t.createElement("button");r.classList.add(Qn("b")),_(e.viewProps,r),this.element.appendChild(r),this.buttonElement=r;var i=t.createElement("div");i.classList.add(Qn("p")),this.pickerView_=e.pickerView,i.appendChild(this.pickerView_.element),this.element.appendChild(i),this.update_()}return t.prototype.update_=function(){var t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Gn(t)},t.prototype.onValueChange_=function(){this.update_()},t}(),Wn=function(){function t(t){this.maxValue=t.max,this.minValue=t.min}return t.prototype.constrain=function(t){var e=t;return o(this.minValue)||(e=Math.max(e,this.minValue)),o(this.maxValue)||(e=Math.min(e,this.maxValue)),e},t}();function Zn(t){var e=t.primary,n=t.secondary,r=t.forward,i=t.backward,o=!1;function a(t){o||(o=!0,t(),o=!1)}e.emitter.on("change",function(){a(function(){n.rawValue=r(e,n)})}),n.emitter.on("change",function(){a(function(){e.rawValue=i(e,n)}),a(function(){n.rawValue=r(e,n)})}),a(function(){n.rawValue=r(e,n)})}var tr=d("clp"),er=function(){function t(t,e){this.alphaViews_=null,this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.pickedColor=e.pickedColor,this.pickedColor.value.emitter.on("change",this.onValueChange_),this.expanded_=e.expanded,this.expanded_.emitter.on("change",this.onFoldableChange_),this.element=t.createElement("div"),this.element.classList.add(tr());var n=t.createElement("div");n.classList.add(tr("hsv"));var r=t.createElement("div");r.classList.add(tr("sv")),this.svPaletteView_=e.svPaletteView,r.appendChild(this.svPaletteView_.element),n.appendChild(r);var i=t.createElement("div");i.classList.add(tr("h")),this.hPaletteView_=e.hPaletteView,i.appendChild(this.hPaletteView_.element),n.appendChild(i),this.element.appendChild(n);var o=t.createElement("div");if(o.classList.add(tr("rgb")),this.textView_=e.textView,o.appendChild(this.textView_.element),this.element.appendChild(o),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};var a=t.createElement("div");a.classList.add(tr("a"));var s=t.createElement("div");s.classList.add(tr("ap")),s.appendChild(this.alphaViews_.palette.element),a.appendChild(s);var l=t.createElement("div");l.classList.add(tr("at")),l.appendChild(this.alphaViews_.text.element),a.appendChild(l),this.element.appendChild(a)}this.update_()}return Object.defineProperty(t.prototype,"allFocusableElements",{get:function(){var t=r([this.svPaletteView_.element,this.hPaletteView_.element],this.textView_.textViews.map(function(t){return t.inputElement}));return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),i(t)},enumerable:!1,configurable:!0}),t.prototype.update_=function(){this.expanded_.rawValue?this.element.classList.add(tr(void 0,"expanded")):this.element.classList.remove(tr(void 0,"expanded"))},t.prototype.onValueChange_=function(){this.update_()},t.prototype.onFoldableChange_=function(){this.update_()},t}();function nr(t){return t?.1:1}var rr=d("apl"),ir=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(rr()),w(e.viewProps,this.element);var n=t.createElement("div");n.classList.add(rr("b")),this.element.appendChild(n);var r=t.createElement("div");r.classList.add(rr("c")),n.appendChild(r),this.colorElem_=r;var i=t.createElement("div");i.classList.add(rr("m")),this.element.appendChild(i),this.markerElem_=i;var o=t.createElement("div");o.classList.add(rr("p")),this.markerElem_.appendChild(o),this.previewElem_=o,this.update_()}return t.prototype.update_=function(){var t=this.value.rawValue,e=t.getComponents("rgb"),n=new On([e[0],e[1],e[2],0],"rgb"),r=new On([e[0],e[1],e[2],255],"rgb"),i=["to right",Yn(n),Yn(r)];this.colorElem_.style.background="linear-gradient("+i.join(",")+")",this.previewElem_.style.backgroundColor=Yn(t);var o=Q(e[3],0,1,0,100);this.markerElem_.style.left=o+"%"},t.prototype.onValueChange_=function(){this.update_()},t}(),or=function(){function t(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new ir(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ze(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_)}return t.prototype.handlePointerEvent_=function(t){if(t.point){var e=t.point.x/t.bounds.width,n=this.value.rawValue.getComponents("hsv"),r=n[0],i=n[1],o=n[2];this.value.rawValue=new On([r,i,o,e],"hsv")}},t.prototype.onPointerDown_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerMove_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerUp_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onKeyDown_=function(t){var e=Re(nr(!0),He(t)),n=this.value.rawValue.getComponents("hsv"),r=n[0],i=n[1],o=n[2],a=n[3];this.value.rawValue=new On([r,i,o,a+e],"hsv")},t}(),ar=d("cltxt");var sr=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(ar());var n=t.createElement("div");n.classList.add(ar("m")),this.modeElem_=function(t){var e=t.createElement("select");return e.appendChild([{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}].reduce(function(e,n){var r=t.createElement("option");return r.textContent=n.text,r.value=n.value,e.appendChild(r),e},t.createDocumentFragment())),e}(t),this.modeElem_.classList.add(ar("ms")),n.appendChild(this.modeSelectElement);var r=t.createElement("div");r.classList.add(ar("mm")),r.appendChild(D(t,"dropdown")),n.appendChild(r),this.element.appendChild(n);var i=t.createElement("div");i.classList.add(ar("w")),this.element.appendChild(i),this.textsElem_=i,this.textViews_=e.textViews,this.applyTextViews_(),this.pickedColor=e.pickedColor,this.pickedColor.emitter.on("change",this.onValueChange_),this.update_()}return Object.defineProperty(t.prototype,"modeSelectElement",{get:function(){return this.modeElem_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textViews",{get:function(){return this.textViews_},set:function(t){this.textViews_=t,this.applyTextViews_()},enumerable:!1,configurable:!0}),t.prototype.update_=function(){this.modeElem_.value=this.pickedColor.mode},t.prototype.applyTextViews_=function(){var t=this;N(this.textsElem_);var e=this.element.ownerDocument;this.textViews_.forEach(function(n){var r=e.createElement("div");r.classList.add(ar("c")),r.appendChild(n.element),t.textsElem_.appendChild(r)})},t.prototype.onValueChange_=function(){this.update_()},t}(),lr=Ie(0),pr={rgb:function(){return new Wn({min:0,max:255})},hsl:function(t){return new Wn(0===t?{min:0,max:360}:{min:0,max:100})},hsv:function(t){return new Wn(0===t?{min:0,max:360}:{min:0,max:100})}};function ur(t,e,n){return new Ye(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",baseStep:nr(!1),parser:e.parser,props:new z({draggingScale:1,formatter:lr}),value:new T(0,{constraint:pr[e.colorMode](n)}),viewProps:e.viewProps})}var dr=function(){function t(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.parser_=e.parser,this.pickedColor=e.pickedColor,this.viewProps=e.viewProps,this.ccs_=this.createComponentControllers_(t),this.view=new sr(t,{pickedColor:this.pickedColor,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}return Object.defineProperty(t.prototype,"value",{get:function(){return this.pickedColor.value},enumerable:!1,configurable:!0}),t.prototype.createComponentControllers_=function(t){var e=this,n={colorMode:this.pickedColor.mode,parser:this.parser_,viewProps:this.viewProps},r=[ur(t,n,0),ur(t,n,1),ur(t,n,2)];return r.forEach(function(t,n){Zn({primary:e.value,secondary:t.value,forward:function(t){return t.rawValue.getComponents(e.pickedColor.mode)[n]},backward:function(t,r){var i=e.pickedColor.mode,o=t.rawValue.getComponents(i);return o[n]=r.rawValue,new On(An(Sn(o),o[3]),i)}})}),r},t.prototype.onModeSelectChange_=function(t){var e=t.currentTarget;this.pickedColor.mode=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]},t}(),cr=d("hpl"),hr=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(cr()),w(e.viewProps,this.element);var n=t.createElement("div");n.classList.add(cr("c")),this.element.appendChild(n);var r=t.createElement("div");r.classList.add(cr("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}return t.prototype.update_=function(){var t=this.value.rawValue.getComponents("hsv")[0];this.markerElem_.style.backgroundColor=qn(new On([t,100,100],"hsv"));var e=Q(t,0,360,0,100);this.markerElem_.style.left=e+"%"},t.prototype.onValueChange_=function(){this.update_()},t}(),vr=function(){function t(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new hr(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ze(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_)}return t.prototype.handlePointerEvent_=function(t){if(t.point){var e=Q(t.point.x,0,t.bounds.width,0,360),n=this.value.rawValue.getComponents("hsv"),r=n[1],i=n[2],o=n[3];this.value.rawValue=new On([e,r,i,o],"hsv")}},t.prototype.onPointerDown_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerMove_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerUp_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onKeyDown_=function(t){var e=Re(nr(!1),He(t)),n=this.value.rawValue.getComponents("hsv"),r=n[0],i=n[1],o=n[2],a=n[3];this.value.rawValue=new On([r+e,i,o,a],"hsv")},t}(),fr=d("svp"),mr=64,br=function(){function t(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(fr()),w(e.viewProps,this.element);var n=t.createElement("canvas");n.height=mr,n.width=mr,n.classList.add(fr("c")),this.element.appendChild(n),this.canvasElement=n;var r=t.createElement("div");r.classList.add(fr("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}return t.prototype.update_=function(){var t=A(this.canvasElement);if(t){for(var e=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,r=this.canvasElement.height,i=t.getImageData(0,0,n,r),o=i.data,a=0;a<r;a++)for(var s=0;s<n;s++){var l=Q(s,0,n,0,100),p=Q(a,0,r,100,0),u=Ln(e[0],l,p),d=4*(a*n+s);o[d]=u[0],o[d+1]=u[1],o[d+2]=u[2],o[d+3]=255}t.putImageData(i,0,0);var c=Q(e[1],0,100,0,100);this.markerElem_.style.left=c+"%";var h=Q(e[2],0,100,100,0);this.markerElem_.style.top=h+"%"}},t.prototype.onValueChange_=function(){this.update_()},t}(),gr=function(){function t(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new br(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ze(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_)}return t.prototype.handlePointerEvent_=function(t){if(t.point){var e=Q(t.point.x,0,t.bounds.width,0,100),n=Q(t.point.y,0,t.bounds.height,100,0),r=this.value.rawValue.getComponents("hsv"),i=r[0],o=r[3];this.value.rawValue=new On([i,e,n,o],"hsv")}},t.prototype.onPointerDown_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerMove_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerUp_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onKeyDown_=function(t){Te(t.key)&&t.preventDefault();var e=this.value.rawValue.getComponents("hsv"),n=e[0],r=e[1],i=e[2],o=e[3],a=nr(!1);this.value.rawValue=new On([n,r+Re(a,He(t)),i+Re(a,Ue(t)),o],"hsv")},t}(),_r=function(){function t(t,e){var n=this;this.triggerElement=null,this.onFocusableElementBlur_=this.onFocusableElementBlur_.bind(this),this.onKeyDown_=this.onKeyDown_.bind(this),this.pickedColor=e.pickedColor,this.viewProps=e.viewProps,this.expanded=new K(!1),this.hPaletteIc_=new vr(t,{value:this.pickedColor.value,viewProps:this.viewProps}),this.svPaletteIc_=new gr(t,{value:this.pickedColor.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new or(t,{value:this.pickedColor.value,viewProps:this.viewProps}),text:new Ye(t,{parser:je,baseStep:.1,props:new z({draggingScale:.01,formatter:Ie(2)}),value:new T(0,{constraint:new Wn({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Zn({primary:this.pickedColor.value,secondary:this.alphaIcs_.text.value,forward:function(t){return t.rawValue.getComponents()[3]},backward:function(t,e){var n=t.rawValue.getComponents();return n[3]=e.rawValue,new On(n,t.rawValue.mode)}}),this.tc_=new dr(t,{parser:je,pickedColor:this.pickedColor,viewProps:this.viewProps}),this.view=new er(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,expanded:this.expanded,hPaletteView:this.hPaletteIc_.view,pickedColor:this.pickedColor,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteIc_.view,textView:this.tc_.view}),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.allFocusableElements.forEach(function(t){t.addEventListener("blur",n.onFocusableElementBlur_)})}return Object.defineProperty(t.prototype,"value",{get:function(){return this.pickedColor.value},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textController",{get:function(){return this.tc_},enumerable:!1,configurable:!0}),t.prototype.onFocusableElementBlur_=function(t){var e=this.view.element,n=I(t);n&&e.contains(n)||n&&n===this.triggerElement&&!L(e.ownerDocument)||(this.expanded.rawValue=!1)},t.prototype.onKeyDown_=function(t){"Escape"===t.key&&(this.expanded.rawValue=!1)},t}(),wr=function(){function t(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.pickerIc_=new _r(t,{pickedColor:new kn(this.value),supportsAlpha:e.supportsAlpha,viewProps:this.viewProps}),this.view=new Jn(t,{pickerView:this.pickerIc_.view,value:this.value,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("blur",this.onButtonBlur_),this.view.buttonElement.addEventListener("click",this.onButtonClick_),this.pickerIc_.triggerElement=this.view.buttonElement}return t.prototype.onButtonBlur_=function(t){var e=this.view.element,n=i(t.relatedTarget);n&&e.contains(n)||(this.pickerIc_.expanded.rawValue=!1)},t.prototype.onButtonClick_=function(){this.pickerIc_.expanded.rawValue=!this.pickerIc_.expanded.rawValue,this.pickerIc_.expanded.rawValue&&this.pickerIc_.view.allFocusableElements[0].focus()},t}(),yr=function(){return function(t,e){this.value=e.value,this.viewProps=e.viewProps,this.swatchIc_=new wr(t,{supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps}),this.textIc_=new hn(t,{parser:e.parser,props:new z({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new Cn(t,{swatchView:this.swatchIc_.view,textView:this.textIc_.view})}}();function xr(t){return On.isColorObject(t)?On.fromObject(t):On.black()}function Pr(t){return Sn(t.getComponents("rgb")).reduce(function(t,e){return t<<8|255&Math.floor(e)},0)}function Cr(t){return t.getComponents("rgb").reduce(function(t,e,n){return t<<8|255&Math.floor(3===n?255*e:e)},0)>>>0}function kr(t){return"number"!=typeof t?On.black():new On([(e=t)>>16&255,e>>8&255,255&e],"rgb");var e}function Er(t){return"number"!=typeof t?On.black():new On([(e=t)>>24&255,e>>16&255,e>>8&255,Q(255&e,0,255,0,1)],"rgb");var e}function Vr(t,e){var n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b),t.writeProperty("a",n.a)}function Lr(t,e){var n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b)}function Sr(t){return"input"in t&&"color.rgba"===t.input}var Ar={id:"input-color-number",accept:function(t,e){return"number"!=typeof t?null:"input"in e?"color"!==e.input&&"color.rgb"!==e.input&&"color.rgba"!==e.input?null:t:null},binding:{reader:function(t){return Sr(t.params)?Er:kr},equals:On.equals,writer:function(t){return e=Sr(t.params),n=e?Cr:Pr,function(t,e){gn(t,n(e))};var e,n}},controller:function(t){var e=Sr(t.params),n=e?Gn:zn;return new yr(t.document,{formatter:n,parser:Un,supportsAlpha:e,value:t.value,viewProps:t.viewProps})}};var Mr={id:"input-color-object",accept:function(t,e){return On.isColorObject(t)?t:null},binding:{reader:function(t){return xr},equals:On.equals,writer:function(t){return e=t.initialValue,On.isRgbaColorObject(e)?Vr:Lr;var e}},controller:function(t){var e=On.isRgbaColorObject(t.initialValue),n=e?Gn:zn;return new yr(t.document,{formatter:n,parser:Un,supportsAlpha:e,value:t.value,viewProps:t.viewProps})}},Dr={id:"input-color-string",accept:function(t,e){return"string"!=typeof t?null:"input"in e&&"string"===e.input?null:Rn(t)?t:null},binding:{reader:function(t){return Tn},equals:On.equals,writer:function(t){var e=Rn(t.initialValue);if(!e)throw s.shouldNeverHappen();return function(t){var e=Xn(t);return function(t,n){gn(t,e(n))}}(e)}},controller:function(t){var e=Rn(t.initialValue);if(!e)throw s.shouldNeverHappen();var n=Xn(e);return new yr(t.document,{formatter:n,parser:Un,supportsAlpha:Hn(e),value:t.value,viewProps:t.viewProps})}};function jr(t){var e=[],n=function(t){return"step"in t&&!o(t.step)?new X(t.step):null}(t);n&&e.push(n);var r=function(t){return"max"in t&&!o(t.max)||"min"in t&&!o(t.min)?new Wn({max:t.max,min:t.min}):null}(t);r&&e.push(r);var i=et(t);return i&&e.push(i),new q(e)}function Or(t){var e=function(t){var e=t?Y(t,Wn):null;return e?[e.minValue,e.maxValue]:[void 0,void 0]}(t),n=e[0],r=e[1];return[null!=n?n:0,null!=r?r:100]}var Nr={id:"input-number",accept:function(t){return"number"==typeof t?t:null},binding:{reader:function(t){return Oe},constraint:function(t){return jr(t.params)},writer:function(t){return gn}},controller:function(t){var e,n,r=t.value,i=t.constraint;if(i&&Y(i,$))return new Xt(t.document,{props:new z({options:null!==(e=nt(i))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps});var o=null!==(n="format"in t.params?t.params.format:void 0)&&void 0!==n?n:Ie(rt(i,r.rawValue));if(i&&Y(i,Wn)){var a=Or(i),s=a[0],l=a[1];return new Je(t.document,{baseStep:it(i),parser:je,sliderProps:new z({maxValue:l,minValue:s}),textProps:new z({draggingScale:ot(i,r.rawValue),formatter:o}),value:r,viewProps:t.viewProps})}return new Ye(t.document,{baseStep:it(i),parser:je,props:new z({draggingScale:ot(i,r.rawValue),formatter:o}),value:r,viewProps:t.viewProps})}},Ir=function(){function t(t){this.components=t.components,this.asm_=t.assembly}return t.prototype.constrain=function(t){var e=this,n=this.asm_.toComponents(t).map(function(t,n){var r,i;return null!==(i=null===(r=e.components[n])||void 0===r?void 0:r.constrain(t))&&void 0!==i?i:t});return this.asm_.fromComponents(n)},t}(),Br=d("pndtxt"),Fr=function(){return function(t,e){var n=this;this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(Br()),this.textViews.forEach(function(e){var r=t.createElement("div");r.classList.add(Br("a")),r.appendChild(e.element),n.element.appendChild(r)})}}();var Rr=function(){return function(t,e){var n=this;this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map(function(n,r){return function(t,e,n){return new Ye(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:new T(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}(t,e,r)}),this.acs_.forEach(function(t,r){Zn({primary:n.value,secondary:t.value,forward:function(t){return e.assembly.toComponents(t.rawValue)[r]},backward:function(t,n){var i=e.assembly.toComponents(t.rawValue);return i[r]=n.rawValue,e.assembly.fromComponents(i)}})}),this.view=new Fr(t,{textViews:this.acs_.map(function(t){return t.view})})}}(),Ur=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.getComponents=function(){return[this.x,this.y]},t.isObject=function(t){if(o(t))return!1;var e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n},t.equals=function(t,e){return t.x===e.x&&t.y===e.y},t.prototype.toObject=function(){return{x:this.x,y:this.y}},t}(),Hr={toComponents:function(t){return t.getComponents()},fromComponents:function(t){return new(Ur.bind.apply(Ur,r([void 0],t)))}},Tr=d("p2dpadtxt"),Kr=function(){function t(t,e){this.element=t.createElement("div"),this.element.classList.add(Tr()),g(e.viewProps,this.element);var n=t.createElement("div");n.classList.add(Tr("w")),this.element.appendChild(n);var r=t.createElement("button");r.classList.add(Tr("b")),r.appendChild(D(t,"p2dpad")),_(e.viewProps,r),n.appendChild(r),this.padButtonElem_=r;var i=t.createElement("div");i.classList.add(Tr("p")),n.appendChild(i),this.padView_=e.padView,i.appendChild(this.padView_.element);var o=t.createElement("div");o.classList.add(Tr("t")),this.textView_=e.textView,o.appendChild(this.textView_.element),this.element.appendChild(o)}return Object.defineProperty(t.prototype,"padButtonElement",{get:function(){return this.padButtonElem_},enumerable:!1,configurable:!0}),t}(),zr=d("p2dpad"),Gr=function(){function t(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.expanded_=e.expanded,this.expanded_.emitter.on("change",this.onFoldableChange_),this.invertsY_=e.invertsY,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(zr());var n=t.createElement("div");n.classList.add(zr("p")),w(e.viewProps,n),this.element.appendChild(n),this.padElement=n;var r=t.createElementNS(E,"svg");r.classList.add(zr("g")),this.padElement.appendChild(r),this.svgElem_=r;var i=t.createElementNS(E,"line");i.classList.add(zr("ax")),i.setAttributeNS(null,"x1","0"),i.setAttributeNS(null,"y1","50%"),i.setAttributeNS(null,"x2","100%"),i.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(i);var o=t.createElementNS(E,"line");o.classList.add(zr("ax")),o.setAttributeNS(null,"x1","50%"),o.setAttributeNS(null,"y1","0"),o.setAttributeNS(null,"x2","50%"),o.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(o);var a=t.createElementNS(E,"line");a.classList.add(zr("l")),a.setAttributeNS(null,"x1","50%"),a.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(a),this.lineElem_=a;var s=t.createElementNS(E,"circle");s.classList.add(zr("m")),s.setAttributeNS(null,"r","2px"),this.svgElem_.appendChild(s),this.markerElem_=s,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}return Object.defineProperty(t.prototype,"allFocusableElements",{get:function(){return[this.padElement]},enumerable:!1,configurable:!0}),t.prototype.update_=function(){this.expanded_.rawValue?this.element.classList.add(zr(void 0,"expanded")):this.element.classList.remove(zr(void 0,"expanded"));var t=this.value.rawValue.getComponents(),e=t[0],n=t[1],r=this.maxValue_,i=Q(e,-r,+r,0,100),o=Q(n,-r,+r,0,100),a=this.invertsY_?100-o:o;this.lineElem_.setAttributeNS(null,"x2",i+"%"),this.lineElem_.setAttributeNS(null,"y2",a+"%"),this.markerElem_.setAttributeNS(null,"cx",i+"%"),this.markerElem_.setAttributeNS(null,"cy",a+"%")},t.prototype.onValueChange_=function(){this.update_()},t.prototype.onFoldableChange_=function(){this.update_()},t}(),qr=function(){function t(t,e){var n=this;this.triggerElement=null,this.onFocusableElementBlur_=this.onFocusableElementBlur_.bind(this),this.onKeyDown_=this.onKeyDown_.bind(this),this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.expanded=new K(!1),this.value=e.value,this.viewProps=e.viewProps,this.baseSteps_=e.baseSteps,this.maxValue_=e.maxValue,this.invertsY_=e.invertsY,this.view=new Gr(t,{expanded:this.expanded,invertsY:this.invertsY_,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new ze(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.allFocusableElements.forEach(function(t){t.addEventListener("blur",n.onFocusableElementBlur_)})}return t.prototype.handlePointerEvent_=function(t){if(t.point){var e=this.maxValue_,n=Q(t.point.x,0,t.bounds.width,-e,+e),r=Q(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-e,+e);this.value.rawValue=new Ur(n,r)}},t.prototype.onPointerDown_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerMove_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPointerUp_=function(t){this.handlePointerEvent_(t.data)},t.prototype.onPadKeyDown_=function(t){Te(t.key)&&t.preventDefault(),this.value.rawValue=new Ur(this.value.rawValue.x+Re(this.baseSteps_[0],He(t)),this.value.rawValue.y+Re(this.baseSteps_[1],Ue(t))*(this.invertsY_?1:-1))},t.prototype.onFocusableElementBlur_=function(t){var e=this.view.element,n=I(t);n&&e.contains(n)||n&&n===this.triggerElement&&!L(e.ownerDocument)||(this.expanded.rawValue=!1)},t.prototype.onKeyDown_=function(t){"Escape"===t.key&&(this.expanded.rawValue=!1)},t}(),Yr=function(){function t(t,e){this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.padIc_=new qr(t,{baseSteps:[e.axes[0].baseStep,e.axes[1].baseStep],invertsY:e.invertsY,maxValue:e.maxValue,value:this.value,viewProps:this.viewProps}),this.textIc_=new Rr(t,{assembly:Hr,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new Kr(t,{padView:this.padIc_.view,textView:this.textIc_.view,viewProps:this.viewProps}),this.view.padButtonElement.addEventListener("blur",this.onPadButtonBlur_),this.view.padButtonElement.addEventListener("click",this.onPadButtonClick_),this.padIc_.triggerElement=this.view.padButtonElement}return t.prototype.onPadButtonBlur_=function(t){var e=this.view.element,n=i(t.relatedTarget);n&&e.contains(n)||(this.padIc_.expanded.rawValue=!1)},t.prototype.onPadButtonClick_=function(){this.padIc_.expanded.rawValue=!this.padIc_.expanded.rawValue,this.padIc_.expanded.rawValue&&this.padIc_.view.allFocusableElements[0].focus()},t}();function $r(t){return Ur.isObject(t)?new Ur(t.x,t.y):new Ur}function Xr(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function Qr(t){if(t){var e=[];return o(t.step)||e.push(new X(t.step)),o(t.max)&&o(t.min)||e.push(new Wn({max:t.max,min:t.min})),new q(e)}}function Jr(t,e){var n=t&&Y(t,Wn);if(n)return Math.max(Math.abs(n.minValue||0),Math.abs(n.maxValue||0));var r=it(t);return Math.max(10*Math.abs(r),10*Math.abs(e))}function Wr(t,e){return{baseStep:it(e),constraint:e,textProps:new z({draggingScale:ot(e,t),formatter:Ie(rt(e,t))})}}function Zr(t){if(!("y"in t))return!1;var e=t.y;return!!e&&("inverted"in e&&!!e.inverted)}var ti={id:"input-point2d",accept:function(t,e){return Ur.isObject(t)?t:null},binding:{reader:function(t){return $r},constraint:function(t){return e=t.params,new Ir({assembly:Hr,components:[Qr("x"in e?e.x:void 0),Qr("y"in e?e.y:void 0)]});var e},equals:Ur.equals,writer:function(t){return Xr}},controller:function(t){var e,n,r,i,o,a,l=t.document,p=t.value,u=t.constraint;if(!(u instanceof Ir))throw s.shouldNeverHappen();return new Yr(l,{axes:[Wr(p.rawValue.x,u.components[0]),Wr(p.rawValue.y,u.components[1])],invertsY:Zr(t.params),maxValue:(e=p.rawValue,n=u,r=n instanceof Ir?n.components[0]:void 0,i=n instanceof Ir?n.components[1]:void 0,o=Jr(r,e.x),a=Jr(i,e.y),Math.max(o,a)),parser:je,value:p,viewProps:t.viewProps})}},ei=function(){function t(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}return t.prototype.getComponents=function(){return[this.x,this.y,this.z]},t.isObject=function(t){if(o(t))return!1;var e=t.x,n=t.y,r=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof r},t.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z},t.prototype.toObject=function(){return{x:this.x,y:this.y,z:this.z}},t}(),ni={toComponents:function(t){return t.getComponents()},fromComponents:function(t){return new(ei.bind.apply(ei,r([void 0],t)))}};function ri(t){return ei.isObject(t)?new ei(t.x,t.y,t.z):new ei}function ii(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function oi(t){if(t){var e=[];return o(t.step)||e.push(new X(t.step)),o(t.max)&&o(t.min)||e.push(new Wn({max:t.max,min:t.min})),new q(e)}}function ai(t,e){return{baseStep:it(e),constraint:e,textProps:new z({draggingScale:ot(e,t),formatter:Ie(rt(e,t))})}}var si={id:"input-point3d",accept:function(t,e){return ei.isObject(t)?t:null},binding:{reader:function(t){return ri},constraint:function(t){return e=t.params,new Ir({assembly:ni,components:[oi("x"in e?e.x:void 0),oi("y"in e?e.y:void 0),oi("z"in e?e.z:void 0)]});var e},equals:ei.equals,writer:function(t){return ii}},controller:function(t){var e=t.value,n=t.constraint;if(!(n instanceof Ir))throw s.shouldNeverHappen();return new Rr(t.document,{assembly:ni,axes:[ai(e.rawValue.x,n.components[0]),ai(e.rawValue.y,n.components[1]),ai(e.rawValue.z,n.components[2])],parser:je,value:e,viewProps:t.viewProps})}},li=function(){function t(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=e,this.z=n,this.w=r}return t.prototype.getComponents=function(){return[this.x,this.y,this.z,this.w]},t.isObject=function(t){if(o(t))return!1;var e=t.x,n=t.y,r=t.z,i=t.w;return"number"==typeof e&&"number"==typeof n&&"number"==typeof r&&"number"==typeof i},t.equals=function(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w},t.prototype.toObject=function(){return{x:this.x,y:this.y,z:this.z,w:this.w}},t}(),pi={toComponents:function(t){return t.getComponents()},fromComponents:function(t){return new(li.bind.apply(li,r([void 0],t)))}};function ui(t){return li.isObject(t)?new li(t.x,t.y,t.z,t.w):new li}function di(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function ci(t){if(t){var e=[];return o(t.step)||e.push(new X(t.step)),o(t.max)&&o(t.min)||e.push(new Wn({max:t.max,min:t.min})),new q(e)}}var hi={id:"input-point4d",accept:function(t,e){return li.isObject(t)?t:null},binding:{reader:function(t){return ui},constraint:function(t){return e=t.params,new Ir({assembly:pi,components:[ci("x"in e?e.x:void 0),ci("y"in e?e.y:void 0),ci("z"in e?e.z:void 0),ci("w"in e?e.w:void 0)]});var e},equals:li.equals,writer:function(t){return di}},controller:function(t){var e=t.value,n=t.constraint;if(!(n instanceof Ir))throw s.shouldNeverHappen();return new Rr(t.document,{assembly:pi,axes:e.rawValue.getComponents().map(function(t,e){return r=t,{baseStep:it(i=n.components[e]),constraint:i,textProps:new z({draggingScale:ot(i,r),formatter:Ie(rt(i,r))})};var r,i}),parser:je,value:e,viewProps:t.viewProps})}};function vi(t){return String(t)}function fi(t){return t}var mi={id:"input-string",accept:function(t,e){return"string"==typeof t?t:null},binding:{reader:function(t){return vi},constraint:function(t){return e=t.params,n=[],(r=et(e))&&n.push(r),new q(n);var e,n,r},writer:function(t){return gn}},controller:function(t){var e,n=t.document,r=t.value,i=t.constraint;return i&&Y(i,$)?new Xt(n,{props:new z({options:null!==(e=nt(i))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps}):new hn(n,{parser:function(t){return t},props:new z({formatter:fi}),value:r,viewProps:t.viewProps})}},bi=function(){function t(t){var e=t.split("-"),n=e[0],r=e[1],i=n.split(".");this.major=parseInt(i[0],10),this.minor=parseInt(i[1],10),this.patch=parseInt(i[2],10),this.prerelease=null!=r?r:null}return t.prototype.toString=function(){var t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t},t}(),gi=d("mll"),_i=function(){function t(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(gi()),g(e.viewProps,this.element);var n=t.createElement("textarea");n.classList.add(gi("i")),n.style.height="calc(var(--bld-h) * "+e.lineCount+")",n.readOnly=!0,_(e.viewProps,n),this.element.appendChild(n),this.textareaElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}return t.prototype.update_=function(){var t=this,e=this.textareaElem_,n=e.scrollTop===e.scrollHeight-e.clientHeight,r=[];this.value.rawValue.forEach(function(e){void 0!==e&&r.push(t.formatter_(e))}),e.textContent=r.join("\n"),n&&(e.scrollTop=e.scrollHeight)},t.prototype.onValueUpdate_=function(){this.update_()},t}(),wi=function(){return function(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new _i(t,{formatter:e.formatter,lineCount:e.lineCount,value:this.value,viewProps:this.viewProps})}}(),yi=d("sgl"),xi=function(){function t(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(yi()),g(e.viewProps,this.element);var n=t.createElement("input");n.classList.add(yi("i")),n.readOnly=!0,n.type="text",_(e.viewProps,n),this.element.appendChild(n),this.inputElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}return t.prototype.update_=function(){var t=this.value.rawValue,e=t[t.length-1];this.inputElem_.value=void 0!==e?this.formatter_(e):""},t.prototype.onValueUpdate_=function(){this.update_()},t}(),Pi=function(){return function(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new xi(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}(),Ci={id:"monitor-bool",accept:function(t,e){return"boolean"==typeof t?t:null},binding:{reader:function(t){return mn}},controller:function(t){var e;return 1===t.value.rawValue.length?new Pi(t.document,{formatter:bn,value:t.value,viewProps:t.viewProps}):new wi(t.document,{formatter:bn,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:vt.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}},ki=function(){function t(){this.emitter=new l,this.index_=-1}return Object.defineProperty(t.prototype,"index",{get:function(){return this.index_},set:function(t){this.index_!==t&&(this.index_=t,this.emitter.emit("change",{index:t,sender:this}))},enumerable:!1,configurable:!0}),t}(),Ei=d("grl"),Vi=function(){function t(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Ei()),g(e.viewProps,this.element),this.formatter_=e.formatter,this.minValue_=e.minValue,this.maxValue_=e.maxValue,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);var n=t.createElementNS(E,"svg");n.classList.add(Ei("g")),n.style.height="calc(var(--bld-h) * "+e.lineCount+")",this.element.appendChild(n),this.svgElem_=n;var r=t.createElementNS(E,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;var i=t.createElement("div");i.classList.add(Ei("t"),d("tt")()),this.element.appendChild(i),this.tooltipElem_=i,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}return Object.defineProperty(t.prototype,"graphElement",{get:function(){return this.svgElem_},enumerable:!1,configurable:!0}),t.prototype.update_=function(){var t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.minValue_,r=this.maxValue_,i=[];this.value.rawValue.forEach(function(o,a){if(void 0!==o){var s=Q(a,0,e,0,t.width),l=Q(o,n,r,t.height,0);i.push([s,l].join(","))}}),this.lineElem_.setAttributeNS(null,"points",i.join(" "));var o=this.tooltipElem_,a=this.value.rawValue[this.cursor_.index];if(void 0!==a){var s=Q(this.cursor_.index,0,e,0,t.width),l=Q(a,n,r,t.height,0);o.style.left=s+"px",o.style.top=l+"px",o.textContent=""+this.formatter_(a),o.classList.contains(Ei("t","a"))||(o.classList.add(Ei("t","a"),Ei("t","in")),V(o),o.classList.remove(Ei("t","in")))}else o.classList.remove(Ei("t","a"))},t.prototype.onValueUpdate_=function(){this.update_()},t.prototype.onCursorChange_=function(){this.update_()},t}(),Li=function(){function t(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.cursor_=new ki,this.view=new Vi(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,maxValue:e.maxValue,minValue:e.minValue,value:this.value,viewProps:this.viewProps}),L(t)){var n=new ze(this.view.element);n.emitter.on("down",this.onGraphPointerDown_),n.emitter.on("move",this.onGraphPointerMove_),n.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}return t.prototype.onGraphMouseLeave_=function(){this.cursor_.index=-1},t.prototype.onGraphMouseMove_=function(t){var e=this.view.element.getBoundingClientRect();this.cursor_.index=Math.floor(Q(t.offsetX,0,e.width,0,this.value.rawValue.length))},t.prototype.onGraphPointerDown_=function(t){this.onGraphPointerMove_(t)},t.prototype.onGraphPointerMove_=function(t){t.data.point?this.cursor_.index=Math.floor(Q(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.index=-1},t.prototype.onGraphPointerUp_=function(){this.cursor_.index=-1},t}();function Si(){return Ie(2)}function Ai(t){return"view"in t&&"graph"===t.view}var Mi={id:"monitor-number",accept:function(t,e){return"number"==typeof t?t:null},binding:{defaultBufferSize:function(t){return Ai(t)?64:1},reader:function(t){return Oe}},controller:function(t){return Ai(t.params)?function(t){var e,n,r;return new Li(t.document,{formatter:Si(),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:vt.monitor.defaultLineCount,maxValue:null!==(n="max"in t.params?t.params.max:null)&&void 0!==n?n:100,minValue:null!==(r="min"in t.params?t.params.min:null)&&void 0!==r?r:0,value:t.value,viewProps:t.viewProps})}(t):function(t){var e;return 1===t.value.rawValue.length?new Pi(t.document,{formatter:Si(),value:t.value,viewProps:t.viewProps}):new wi(t.document,{formatter:Si(),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:vt.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}(t)}},Di={id:"monitor-string",accept:function(t,e){return"string"==typeof t?t:null},binding:{reader:function(t){return vi}},controller:function(t){var e,n=t.value;return n.rawValue.length>1||"multiline"in t.params&&t.params.multiline?new wi(t.document,{formatter:fi,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:vt.monitor.defaultLineCount,value:n,viewProps:t.viewProps}):new Pi(t.document,{formatter:fi,value:n,viewProps:t.viewProps})}};function ji(t,e,n){if(!t.querySelector("style[data-tp-style="+e+"]")){var r=t.createElement("style");r.dataset.tpStyle=e,r.textContent=n,t.head.appendChild(r)}}function Oi(t){ji(t,"default",".tp-lstv_s,.tp-btnv_b,.tp-p2dpadtxtv_b,.tp-fldv_b,.tp-rotv_b,.tp-clswv_sw,.tp-p2dpadv_p,.tp-txtv_i,.tp-grlv_g,.tp-sglv_i,.tp-mllv_i,.tp-ckbv_i,.tp-cltxtv_ms,.tp-tbiv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-fldv_c>.tp-cntv.tp-v-lst,.tp-rotv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-v-p))}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c>*:not(.tp-v-fst),.tp-rotv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-fldv_c>.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c,.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-tabv>.tp-tabv_i,.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-fldv_c .tp-tabv>.tp-tabv_c,.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-lstv_s,.tp-btnv_b,.tp-p2dpadtxtv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-h);line-height:var(--bld-h);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-lstv_s:hover,.tp-btnv_b:hover,.tp-p2dpadtxtv_b:hover{background-color:var(--btn-bg-h)}.tp-lstv_s:focus,.tp-btnv_b:focus,.tp-p2dpadtxtv_b:focus{background-color:var(--btn-bg-f)}.tp-lstv_s:active,.tp-btnv_b:active,.tp-p2dpadtxtv_b:active{background-color:var(--btn-bg-a)}.tp-lstv_s:disabled,.tp-btnv_b:disabled,.tp-p2dpadtxtv_b:disabled{opacity:0.5}.tp-fldv_b,.tp-rotv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-h) + 4px);line-height:calc(var(--bld-h) + 4px);overflow:hidden;padding-left:calc(var(--cnt-h-p) + 8px);padding-right:calc(2px * 2 + var(--bld-h) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_b:hover,.tp-rotv_b:hover{background-color:var(--cnt-bg-h)}.tp-fldv_b:focus,.tp-rotv_b:focus{background-color:var(--cnt-bg-f)}.tp-fldv_b:active,.tp-rotv_b:active{background-color:var(--cnt-bg-a)}.tp-fldv_b:disabled,.tp-rotv_b:disabled{opacity:0.5}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:'';display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-h) + 4px - 6px) / 2 - 2px);margin:auto;opacity:0.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-clswv_sw,.tp-p2dpadv_p,.tp-txtv_i{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-h);line-height:var(--bld-h);min-width:0;width:100%}.tp-clswv_sw:hover,.tp-p2dpadv_p:hover,.tp-txtv_i:hover{background-color:var(--in-bg-h)}.tp-clswv_sw:focus,.tp-p2dpadv_p:focus,.tp-txtv_i:focus{background-color:var(--in-bg-f)}.tp-clswv_sw:active,.tp-p2dpadv_p:active,.tp-txtv_i:active{background-color:var(--in-bg-a)}.tp-clswv_sw:disabled,.tp-p2dpadv_p:disabled,.tp-txtv_i:disabled{opacity:0.5}.tp-cltxtv_m,.tp-lstv{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-cltxtv_mm,.tp-lstv_m{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-cltxtv_mm svg,.tp-lstv_m svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-cltxtv_mm svg path,.tp-lstv_m svg path{fill:currentColor}.tp-grlv_g,.tp-sglv_i,.tp-mllv_i{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-h);width:100%}.tp-clpv,.tp-p2dpadv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:relative;visibility:hidden;z-index:1000}.tp-clpv.tp-clpv-expanded,.tp-p2dpadv.tp-p2dpadv-expanded{display:block;visibility:visible}.tp-cltxtv_w,.tp-pndtxtv{display:flex}.tp-cltxtv_c,.tp-pndtxtv_a{width:100%}.tp-cltxtv_c+.tp-cltxtv_c,.tp-pndtxtv_a+.tp-cltxtv_c,.tp-cltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-pndtxtv_a{margin-left:2px}.tp-btnv_b{width:100%}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-h);position:relative;width:var(--bld-h)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:0.5}.tp-clpv_h,.tp-clpv_ap{margin-left:6px;margin-right:6px}.tp-clpv_h{margin-top:var(--bld-s)}.tp-clpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-clpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-clpv_a:before{background-color:var(--grv-fg);content:'';height:2px;left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:0}.tp-clpv_ap{align-items:center;display:flex;flex:3}.tp-clpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-h) * 4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-h);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-h);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-clswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br)}.tp-clswv.tp-v-disabled{opacity:0.5}.tp-clswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-h);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-h)}.tp-clswv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:'';display:block;left:0;position:absolute;right:0;top:0}.tp-clswv_p{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-h)}.tp-clswtxtv{display:flex;position:relative}.tp-clswtxtv_s{flex-grow:0;flex-shrink:0;width:var(--bld-h)}.tp-clswtxtv_t{flex:1;margin-left:4px}.tp-cltxtv{display:flex;width:100%}.tp-cltxtv_m{margin-right:4px}.tp-cltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-h);line-height:var(--bld-h);padding:0 18px 0 4px}.tp-cltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-cltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-cltxtv_ms:active{background-color:var(--in-bg-a)}.tp-cltxtv_mm{color:var(--lbl-fg)}.tp-cltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-h) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left 0.05s, top 0.05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:0.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:0.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:var(--value-width)}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv.tp-v-disabled .tp-lstv_s{opacity:0.5}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:0.5}.tp-mllv_i{display:block;height:calc(var(--bld-h) * 3);line-height:var(--bld-h);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:0.5}.tp-p2dpadv{padding-left:calc(var(--cnt-h-p) + 4px + var(--bld-h))}.tp-p2dpadv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpadv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpadv_ax{opacity:0.1;stroke:var(--in-fg)}.tp-p2dpadv_l{stroke:var(--in-fg);stroke-dasharray:2px 2px}.tp-p2dpadv_m{fill:var(--in-fg)}.tp-p2dpadtxtv{display:flex;position:relative}.tp-p2dpadtxtv_b{height:var(--bld-h);position:relative;width:var(--bld-h)}.tp-p2dpadtxtv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dpadtxtv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dpadtxtv_b svg circle{fill:currentColor}.tp-p2dpadtxtv_p{left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:var(--bld-h)}.tp-p2dpadtxtv_t{margin-left:4px}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--bs-br: var(--tp-base-border-radius-v3, 6px);--cnt-h-p: var(--tp-container-horizontal-padding-v3, 4px);--cnt-v-p: var(--tp-container-vertical-padding-v3, 4px);--elm-br: var(--tp-element-border-radius-v3, 2px);--bld-h: var(--tp-blade-height-v3, 20px);--bld-s: var(--tp-blade-spacing-v3, 4px);--value-width: var(--tp-value-width-v3, 160px);--bs-bg: var(--tp-base-background-color, #2f3137);--bs-sh: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #2f3137);--cnt-bg: var(--tp-container-background-color, var(--tp-folder-background-color, rgba(187,188,196,0.1)));--cnt-bg-a: var(--tp-container-background-color-active, var(--tp-folder-background-color-active, rgba(187,188,196,0.25)));--cnt-bg-f: var(--tp-container-background-color-focus, var(--tp-folder-background-color-focus, rgba(187,188,196,0.2)));--cnt-bg-h: var(--tp-container-background-color-hover, var(--tp-folder-background-color-hover, rgba(187,188,196,0.15)));--cnt-fg: var(--tp-container-foreground-color, var(--tp-folder-foreground-color, #bbbcc4));--in-bg: var(--tp-input-background-color, rgba(0,0,0,0.2));--in-bg-a: var(--tp-input-background-color-active, rgba(0,0,0,0.35));--in-bg-f: var(--tp-input-background-color-focus, rgba(0,0,0,0.3));--in-bg-h: var(--tp-input-background-color-hover, rgba(0,0,0,0.25));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187,188,196,0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0,0,0,0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187,188,196,0.7));--grv-fg: var(--tp-groove-foreground-color, var(--tp-separator-color, rgba(0,0,0,0.2)));--button-background-color: var(--btn-bg);--button-background-color-active: var(--btn-bg-a);--button-background-color-focus: var(--btn-bg-f);--button-background-color-hover: var(--btn-bg-h);--button-foreground-color: var(--btn-fg);--folder-background-color: var(--cnt-bg);--folder-background-color-active: var(--cnt-bg-a);--folder-background-color-focus: var(--cnt-bg-f);--folder-background-color-hover: var(--cnt-bg-h);--folder-foreground-color: var(--cnt-fg);--input-background-color: var(--in-bg);--input-background-color-active: var(--in-bg-a);--input-background-color-focus: var(--in-bg-f);--input-background-color-hover: var(--in-bg-h);--input-foreground-color: var(--in-fg);--label-foregound-color: var(--lbl-fg);--monitor-background-color: var(--mo-bg);--monitor-foreground-color: var(--mo-fg);--separator-color: var(--grv-fg);--unit-size: var(--bld-h)}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(2px * 2 + var(--bld-h) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:0.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-h);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:'';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:'';display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:'';display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:0.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-h) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:'';height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:'';height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:0.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-h) + 4px);line-height:calc(var(--bld-h) + 4px);opacity:0.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:0.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:'';height:calc(var(--bld-h) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:0.1;position:absolute;top:0;transition:border-radius 0.1s, height 0.1s, transform 0.1s, width 0.1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:2px 2px}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:'';font-size:0.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}"),r(Gt.blades,Gt.inputs,Gt.monitors).forEach(function(e){e.css&&ji(t,"plugin-"+e.id,e.css)})}var Ni=function(t){function n(e){var n,r=this,o=e||{},a=null!==(n=o.document)&&void 0!==n?n:i(S()).document,s=new fe(a,{expanded:o.expanded,blade:new p,props:new z({title:o.title}),viewProps:G()});return(r=t.call(this,s)||this).containerElem_=o.container||function(t){var e=t.createElement("div");return e.classList.add(d("dfw")()),t.body&&t.body.appendChild(e),e}(a),r.containerElem_.appendChild(r.element),r.doc_=a,r.usesDefaultWrapper_=!o.container,Oi(r.document),r}return e(n,t),Object.defineProperty(n.prototype,"document",{get:function(){if(!this.doc_)throw s.alreadyDisposed();return this.doc_},enumerable:!1,configurable:!0}),n.prototype.dispose=function(){var e=this.containerElem_;if(!e)throw s.alreadyDisposed();if(this.usesDefaultWrapper_){var n=e.parentElement;n&&n.removeChild(e)}this.containerElem_=null,this.doc_=null,t.prototype.dispose.call(this)},n.version=new bi("2.4.0"),n}(ve);return[ti,si,hi,mi,Nr,Dr,Mr,Ar,xn].forEach(function(t){Ot({type:"input",plugin:t})}),[Ci,Di,Mi].forEach(function(t){Ot({type:"monitor",plugin:t})}),[Ze,Jt,un,fn].forEach(function(t){Ot({type:"blade",plugin:t})}),Ni});
},{}],"bkbf":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,e=arguments[3];!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof t&&t.amd?t(n):e.canvasSketch=n()}(this,function(){var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var r=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(e,r){for(var o,s,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(e),p=1;p<arguments.length;p++){for(var c in o=Object(arguments[p]))n.call(o,c)&&(a[c]=o[c]);if(t){s=t(o);for(var u=0;u<s.length;u++)i.call(o,s[u])&&(a[s[u]]=o[s[u]])}}return a},o="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};function s(t,e){return t(e={exports:{}},e.exports),e.exports}var a=o.performance&&o.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date},p=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then};var c=function(t){return!(!t||"object"!=typeof t)&&("object"==typeof window&&"object"==typeof window.Node?t instanceof window.Node:"number"==typeof t.nodeType&&"string"==typeof t.nodeName)};function u(){return"undefined"!=typeof window&&window["canvas-sketch-cli"]}function h(){for(var t=arguments,e=0;e<arguments.length;e++)if(null!=t[e])return t[e]}function d(){return"undefined"!=typeof document}var l,f=s(function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n}),m=(f.shim,s(function(t,e){var n="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();function i(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function r(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}(e=t.exports=n?i:r).supported=i,e.unsupported=r})),y=(m.supported,m.unsupported,s(function(t){var e=Array.prototype.slice,n=t.exports=function(t,o,s){return s||(s={}),t===o||(t instanceof Date&&o instanceof Date?t.getTime()===o.getTime():!t||!o||"object"!=typeof t&&"object"!=typeof o?s.strict?t===o:t==o:function(t,o,s){var a,p;if(i(t)||i(o))return!1;if(t.prototype!==o.prototype)return!1;if(m(t))return!!m(o)&&(t=e.call(t),o=e.call(o),n(t,o,s));if(r(t)){if(!r(o))return!1;if(t.length!==o.length)return!1;for(a=0;a<t.length;a++)if(t[a]!==o[a])return!1;return!0}try{var c=f(t),u=f(o)}catch(h){return!1}if(c.length!=u.length)return!1;for(c.sort(),u.sort(),a=c.length-1;a>=0;a--)if(c[a]!=u[a])return!1;for(a=c.length-1;a>=0;a--)if(p=c[a],!n(t[p],o[p],s))return!1;return typeof t==typeof o}(t,o,s))};function i(t){return null==t}function r(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}})),g=s(function(t,e){!function(e){var n,i,r,o=(n=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZWN]|"[^"]*"|'[^']*'/g,i=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,r=/[^-+\dA-Z]/g,function(t,e,a,p){if(1!==arguments.length||"string"!==(null===(c=t)?"null":void 0===c?"undefined":"object"!=typeof c?typeof c:Array.isArray(c)?"array":{}.toString.call(c).slice(8,-1).toLowerCase())||/\d/.test(t)||(e=t,t=void 0),(t=t||new Date)instanceof Date||(t=new Date(t)),isNaN(t))throw TypeError("Invalid date");var c,u=(e=String(o.masks[e]||e||o.masks.default)).slice(0,4);"UTC:"!==u&&"GMT:"!==u||(e=e.slice(4),a=!0,"GMT:"===u&&(p=!0));var h=a?"getUTC":"get",d=t[h+"Date"](),l=t[h+"Day"](),f=t[h+"Month"](),m=t[h+"FullYear"](),y=t[h+"Hours"](),g=t[h+"Minutes"](),v=t[h+"Seconds"](),w=t[h+"Milliseconds"](),b=a?0:t.getTimezoneOffset(),x=function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());e.setDate(e.getDate()-(e.getDay()+6)%7+3);var n=new Date(e.getFullYear(),0,4);n.setDate(n.getDate()-(n.getDay()+6)%7+3);var i=e.getTimezoneOffset()-n.getTimezoneOffset();e.setHours(e.getHours()-i);var r=(e-n)/6048e5;return 1+Math.floor(r)}(t),_=function(t){var e=t.getDay();return 0===e&&(e=7),e}(t),k={d:d,dd:s(d),ddd:o.i18n.dayNames[l],dddd:o.i18n.dayNames[l+7],m:f+1,mm:s(f+1),mmm:o.i18n.monthNames[f],mmmm:o.i18n.monthNames[f+12],yy:String(m).slice(2),yyyy:m,h:y%12||12,hh:s(y%12||12),H:y,HH:s(y),M:g,MM:s(g),s:v,ss:s(v),l:s(w,3),L:s(Math.round(w/10)),t:y<12?o.i18n.timeNames[0]:o.i18n.timeNames[1],tt:y<12?o.i18n.timeNames[2]:o.i18n.timeNames[3],T:y<12?o.i18n.timeNames[4]:o.i18n.timeNames[5],TT:y<12?o.i18n.timeNames[6]:o.i18n.timeNames[7],Z:p?"GMT":a?"UTC":(String(t).match(i)||[""]).pop().replace(r,""),o:(b>0?"-":"+")+s(100*Math.floor(Math.abs(b)/60)+Math.abs(b)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10],W:x,N:_};return e.replace(n,function(t){return t in k?k[t]:t.slice(1,t.length-1)})});function s(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}o.masks={default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:sso",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'",expiresHeaderFormat:"ddd, dd mmm yyyy HH:MM:ss Z"},o.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],timeNames:["a","p","am","pm","A","P","AM","PM"]},t.exports=o}()}),v="",w=function(t,e){if("string"!=typeof t)throw new TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var n=t.length*e;if(l!==t||void 0===l)l=t,v="";else if(v.length>=n)return v.substr(0,n);for(;n>v.length&&e>1;)1&e&&(v+=t),e>>=1,t+=t;return v=(v+=t).substr(0,n)};var b,x=function(t,e,n){return t=t.toString(),void 0===e?t:(n=0===n?"0":n?n.toString():" ",w(n,e-t.length)+t)},_=function(){},k={extension:"",prefix:"",suffix:""},T=["image/png","image/jpeg","image/webp"];function R(t,e){return void 0===e&&(e={}),new Promise(function(n,i){e=r({},k,e);var o=P(Object.assign({},e,{extension:"",frame:void 0})),s=t?"streamStart":"streamEnd",a=u();return a&&a.output&&"function"==typeof a[s]?a[s](r({},e,{filename:o})).then(function(t){return n(t)}):n({filename:o,client:!1})})}function M(t,e){return void 0===e&&(e={}),function(t){return new Promise(function(e){var n=t.indexOf(",");if(-1!==n){for(var i=t.slice(n+1),r=window.atob(i),o=t.slice(0,n),s=/data:([^;]+)/.exec(o),a=(s?s[1]:"")||void 0,p=new ArrayBuffer(r.length),c=new Uint8Array(p),u=0;u<r.length;u++)c[u]=r.charCodeAt(u);e(new window.Blob([p],{type:a}))}else e(new window.Blob)})}(t).then(function(t){return E(t,e)})}function E(t,e){return void 0===e&&(e={}),new Promise(function(n){var i=(e=r({},k,e)).filename,o=u();if(o&&"function"==typeof o.saveBlob&&o.output)return o.saveBlob(t,r({},e,{filename:i})).then(function(t){return n(t)});b||((b=document.createElement("a")).style.visibility="hidden",b.target="_blank"),b.download=i,b.href=window.URL.createObjectURL(t),document.body.appendChild(b),b.onclick=function(){b.onclick=_,setTimeout(function(){window.URL.revokeObjectURL(t),b.parentElement&&b.parentElement.removeChild(b),b.removeAttribute("href"),n({filename:i,client:!1})})},b.click()})}function P(t){if(void 0===t&&(t={}),"function"==typeof(t=r({},t)).file)return t.file(t);if(t.file)return t.file;var e,n=null,i="";("string"==typeof t.extension&&(i=t.extension),"number"==typeof t.frame)&&(e="number"==typeof t.totalFrames?t.totalFrames:Math.max(1e4,t.frame),n=x(String(t.frame),String(e).length,"0"));var o=isFinite(t.totalLayers)&&isFinite(t.layer)&&t.totalLayers>1?""+t.layer:"";if(null!=n)return[o,n].filter(Boolean).join("-")+i;var s=t.timeStamp;return[t.prefix,t.name||s,o,t.hash,t.suffix].filter(Boolean).join("-")+i}var j={dimension:"dimensions",animated:"animate",animating:"animate",unit:"units",P5:"p5",pixellated:"pixelated",looping:"loop",pixelPerInch:"pixels"},F=["dimensions","units","pixelsPerInch","orientation","scaleToFit","scaleToView","bleed","pixelRatio","exportPixelRatio","maxPixelRatio","scaleContext","resizeCanvas","styleCanvas","canvas","context","attributes","parent","file","name","prefix","suffix","animate","playing","loop","duration","totalFrames","fps","playbackRate","timeScale","frame","time","flush","pixelated","hotkeys","p5","id","scaleToFitPadding","data","params","encoding","encodingQuality"],C=function(t){Object.keys(t).forEach(function(t){if(t in j){var e=j[t];console.warn('[canvas-sketch] Could not recognize the setting "'+t+'", did you mean "'+e+'"?')}else F.includes(t)||console.warn('[canvas-sketch] Could not recognize the setting "'+t+'"')})};var S=[["postcard",101.6,152.4],["poster-small",280,430],["poster",460,610],["poster-large",610,910],["business-card",50.8,88.9],["2r",64,89],["3r",89,127],["4r",102,152],["5r",127,178],["6r",152,203],["8r",203,254],["10r",254,305],["11r",279,356],["12r",305,381],["a0",841,1189],["a1",594,841],["a2",420,594],["a3",297,420],["a4",210,297],["a5",148,210],["a6",105,148],["a7",74,105],["a8",52,74],["a9",37,52],["a10",26,37],["2a0",1189,1682],["4a0",1682,2378],["b0",1e3,1414],["b1",707,1e3],["b1+",720,1020],["b2",500,707],["b2+",520,720],["b3",353,500],["b4",250,353],["b5",176,250],["b6",125,176],["b7",88,125],["b8",62,88],["b9",44,62],["b10",31,44],["b11",22,32],["b12",16,22],["c0",917,1297],["c1",648,917],["c2",458,648],["c3",324,458],["c4",229,324],["c5",162,229],["c6",114,162],["c7",81,114],["c8",57,81],["c9",40,57],["c10",28,40],["c11",22,32],["c12",16,22],["half-letter",5.5,8.5,"in"],["letter",8.5,11,"in"],["legal",8.5,14,"in"],["junior-legal",5,8,"in"],["ledger",11,17,"in"],["tabloid",11,17,"in"],["ansi-a",8.5,11,"in"],["ansi-b",11,17,"in"],["ansi-c",17,22,"in"],["ansi-d",22,34,"in"],["ansi-e",34,44,"in"],["arch-a",9,12,"in"],["arch-b",12,18,"in"],["arch-c",18,24,"in"],["arch-d",24,36,"in"],["arch-e",36,48,"in"],["arch-e1",30,42,"in"],["arch-e2",26,38,"in"],["arch-e3",27,39,"in"]].reduce(function(t,e){var n={units:e[3]||"mm",dimensions:[e[1],e[2]]};return t[e[0]]=n,t[e[0].replace(/-/g," ")]=n,t},{}),O=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},D=["mm","cm","m","pc","pt","in","ft","px"],N={m:{system:"metric",factor:1},cm:{system:"metric",factor:.01},mm:{system:"metric",factor:.001},pt:{system:"imperial",factor:1/72},pc:{system:"imperial",factor:1/6},in:{system:"imperial",factor:1},ft:{system:"imperial",factor:12}};const H={metric:{unit:"m",ratio:1/.0254},imperial:{unit:"in",ratio:.0254}};var A=function(t,e,n,i){if("number"!=typeof t||!isFinite(t))throw new Error("Value must be a finite number");if(!e||!n)throw new Error("Must specify from and to units");var r=O((i=i||{}).pixelsPerInch,96),o=i.precision,s=!1!==i.roundPixel;if(e=e.toLowerCase(),n=n.toLowerCase(),-1===D.indexOf(e))throw new Error('Invalid from unit "'+e+'", must be one of: '+D.join(", "));if(-1===D.indexOf(n))throw new Error('Invalid from unit "'+n+'", must be one of: '+D.join(", "));if(e===n)return t;var a=1,p=1,c=!1;"px"===e&&(p=1/r,e="in"),"px"===n&&(c=!0,a=r,n="in");var u=N[e],h=N[n],d=t*u.factor*p;u.system!==h.system&&(d*=H[u.system].ratio);var l=d/h.factor*a;return c&&s?l=Math.round(l):"number"==typeof o&&isFinite(o)&&(l=function(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)}(l,o)),l},z=D;function L(t,e,n,i){return void 0===e&&(e="px"),void 0===n&&(n="px"),void 0===i&&(i=72),A(t,e,n,{pixelsPerInch:i,precision:4,roundPixel:!0})}function I(t,e){var n,i,r,o,s,a,p=d(),c=e.dimensions,u=function(t){return!(!t.dimensions||"string"!=typeof t.dimensions&&!(Array.isArray(t.dimensions)&&t.dimensions.length>=2))}(e),l=t.exporting,f=!!u&&!1!==e.scaleToFit,m=!(!l&&u)||e.scaleToView;p||(f=m=!1);var y,g,v=e.units,w="number"==typeof e.pixelsPerInch&&isFinite(e.pixelsPerInch)?e.pixelsPerInch:72,b=h(e.bleed,0),x=p?window.devicePixelRatio:1,_=m?x:1;"number"==typeof e.pixelRatio&&isFinite(e.pixelRatio)?(y=e.pixelRatio,g=h(e.exportPixelRatio,y)):u?(y=_,g=h(e.exportPixelRatio,1)):(y=x,g=h(e.exportPixelRatio,y)),"number"==typeof e.maxPixelRatio&&isFinite(e.maxPixelRatio)&&(y=Math.min(e.maxPixelRatio,y)),l&&(y=g);var k,T,R=function(t,e){if(!d())return[300,150];var n=e.parent||window;if(n===window||n===document||n===document.body)return[window.innerWidth,window.innerHeight];var i=n.getBoundingClientRect();return[i.width,i.height]}(0,e),M=R[0],E=R[1];if(u){var P=function(t,e,n){if(void 0===e&&(e="px"),void 0===n&&(n=72),"string"==typeof t){var i=t.toLowerCase();if(!(i in S))throw new Error('The dimension preset "'+t+'" is not supported or could not be found; try using a4, a3, postcard, letter, etc.');var r=S[i];return r.dimensions.map(function(t){return L(t,r.units,e,n)})}return t}(c,v,w),j=Math.max(P[0],P[1]),F=Math.min(P[0],P[1]);if(e.orientation){var C="landscape"===e.orientation;n=C?j:F,i=C?F:j}else n=P[0],i=P[1];k=n,T=i,n+=2*b,i+=2*b}else k=n=M,T=i=E;var O=n,D=i;if(u&&v&&(O=L(n,v,"px",w),D=L(i,v,"px",w)),r=Math.round(O),o=Math.round(D),f&&!l&&u){var N=n/i,H=M/E,A=h(e.scaleToFitPadding,40),z=Math.round(M-2*A),I=Math.round(E-2*A);(r>z||o>I)&&(H>N?(o=I,r=Math.round(o*N)):(r=z,o=Math.round(r/N)))}return{bleed:b,pixelRatio:y,width:n,height:i,dimensions:[n,i],units:v||"px",scaleX:(s=m?Math.round(y*r):Math.round(y*O))/n,scaleY:(a=m?Math.round(y*o):Math.round(y*D))/i,pixelsPerInch:w,viewportWidth:m?Math.round(r):Math.round(O),viewportHeight:m?Math.round(o):Math.round(D),canvasWidth:s,canvasHeight:a,trimWidth:k,trimHeight:T,styleWidth:r,styleHeight:o}}A.units=z;var U=function(t,e){if("string"!=typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"==typeof document&&!e.canvas)return null;var n=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(n.width=e.width);"number"==typeof e.height&&(n.height=e.height);var i,r=e;try{var o=[t];0===t.indexOf("webgl")&&o.push("experimental-"+t);for(var s=0;s<o.length;s++)if(i=n.getContext(o[s],r))return i}catch(a){i=null}return i||null};function W(t){var e,n;void 0===t&&(t={});var i=!1;if(!1!==t.canvas){if(!(e=t.context)||"string"==typeof e){var o=t.canvas;o||(o=function(){if(!d())throw new Error("It appears you are runing from Node.js or a non-browser environment. Try passing in an existing { canvas } interface instead.");return document.createElement("canvas")}(),i=!0);var s=e||"2d";if("function"!=typeof o.getContext)throw new Error("The specified { canvas } element does not have a getContext() function, maybe it is not a <canvas> tag?");if(!(e=U(s,r({},t.attributes,{canvas:o}))))throw new Error("Failed at canvas.getContext('"+s+"') - the browser may not support this context, or a different context may already be in use with this canvas.")}if(n=e.canvas,t.canvas&&n!==t.canvas)throw new Error("The { canvas } and { context } settings must point to the same underlying canvas element");t.pixelated&&(e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.oImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,n.style["image-rendering"]="pixelated")}return{canvas:n,context:e,ownsCanvas:i}}var B=function(){var t=this;this._settings={},this._props={},this._sketch=void 0,this._raf=null,this._recordTimeout=null,this._lastRedrawResult=void 0,this._isP5Resizing=!1,this._keyboardShortcuts=function(t){void 0===t&&(t={});var e=function(e){if(t.enabled()){var n=u();83!==e.keyCode||e.altKey||!e.metaKey&&!e.ctrlKey?32===e.keyCode?t.togglePlay(e):n&&!e.altKey&&75===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),t.commit(e)):(e.preventDefault(),t.save(e))}};return{attach:function(){window.addEventListener("keydown",e)},detach:function(){window.removeEventListener("keydown",e)}}}({enabled:function(){return!1!==t.settings.hotkeys},save:function(e){e.shiftKey?t.props.recording?(t.endRecord(),t.run()):t.record():t.props.recording||t.exportFrame()},togglePlay:function(){t.props.playing?t.pause():t.play()},commit:function(e){t.exportFrame({commit:!0})}}),this._animateHandler=function(){return t.animate()},this._resizeHandler=function(){t.resize()&&t.render()}},Y={sketch:{configurable:!0},settings:{configurable:!0},props:{configurable:!0}};Y.sketch.get=function(){return this._sketch},Y.settings.get=function(){return this._settings},Y.props.get=function(){return this._props},B.prototype._computePlayhead=function(t,e){return"number"==typeof e&&isFinite(e)?t/e:0},B.prototype._computeFrame=function(t,e,n,i){return isFinite(n)&&n>1?Math.floor(t*(n-1)):Math.floor(i*e)},B.prototype._computeCurrentFrame=function(){return this._computeFrame(this.props.playhead,this.props.time,this.props.totalFrames,this.props.fps)},B.prototype._getSizeProps=function(){var t=this.props;return{width:t.width,height:t.height,pixelRatio:t.pixelRatio,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight,viewportWidth:t.viewportWidth,viewportHeight:t.viewportHeight}},B.prototype.run=function(){if(!this.sketch)throw new Error("should wait until sketch is loaded before trying to play()");return!1!==this.settings.playing&&this.play(),"function"==typeof this.sketch.dispose&&console.warn("In canvas-sketch@0.0.23 the dispose() event has been renamed to unload()"),this.props.started||(this._signalBegin(),this.props.started=!0),this.tick(),this.render(),this},B.prototype._cancelTimeouts=function(){null!=this._raf&&"undefined"!=typeof window&&"function"==typeof window.cancelAnimationFrame&&(window.cancelAnimationFrame(this._raf),this._raf=null),null!=this._recordTimeout&&(clearTimeout(this._recordTimeout),this._recordTimeout=null)},B.prototype.play=function(){var t=this.settings.animate;"animation"in this.settings&&(t=!0,console.warn("[canvas-sketch] { animation } has been renamed to { animate }")),t&&(d()?this.props.playing||(this.props.started||(this._signalBegin(),this.props.started=!0),this.props.playing=!0,this._cancelTimeouts(),this._lastTime=a(),this._raf=window.requestAnimationFrame(this._animateHandler)):console.error("[canvas-sketch] WARN: Using { animate } in Node.js is not yet supported"))},B.prototype.pause=function(){this.props.recording&&this.endRecord(),this.props.playing=!1,this._cancelTimeouts()},B.prototype.togglePlay=function(){this.props.playing?this.pause():this.play()},B.prototype.stop=function(){this.pause(),this.props.frame=0,this.props.playhead=0,this.props.time=0,this.props.deltaTime=0,this.props.started=!1,this.render()},B.prototype.record=function(){var t=this;if(!this.props.recording)if(d()){this.stop(),this.props.playing=!0,this.props.recording=!0;var e=this._createExportOptions({sequence:!0}),n=1/this.props.fps;this._cancelTimeouts();var i,r=function(){return t.props.recording?(t.props.deltaTime=n,t.tick(),t.exportFrame(e).then(function(){t.props.recording&&(t.props.deltaTime=0,t.props.frame++,t.props.frame<t.props.totalFrames?(t.props.time+=n,t.props.playhead=t._computePlayhead(t.props.time,t.props.duration),t._recordTimeout=setTimeout(r,0)):(console.log("Finished recording"),t._signalEnd(),t.endRecord(),t.stop(),t.run()))})):Promise.resolve()};this.props.started||(this._signalBegin(),this.props.started=!0),this.sketch&&"function"==typeof this.sketch.beginRecord&&this._wrapContextScale(function(e){return t.sketch.beginRecord(e)}),(i=e,void 0===i&&(i={}),R(!0,i)).catch(function(t){console.error(t)}).then(function(e){t._raf=window.requestAnimationFrame(r)})}else console.error("[canvas-sketch] WARN: Recording from Node.js is not yet supported")},B.prototype._signalBegin=function(){var t=this;this.sketch&&"function"==typeof this.sketch.begin&&this._wrapContextScale(function(e){return t.sketch.begin(e)})},B.prototype._signalEnd=function(){var t=this;this.sketch&&"function"==typeof this.sketch.end&&this._wrapContextScale(function(e){return t.sketch.end(e)})},B.prototype.endRecord=function(){var t,e=this,n=this.props.recording;return this._cancelTimeouts(),this.props.recording=!1,this.props.deltaTime=0,this.props.playing=!1,(void 0===t&&(t={}),R(!1,t)).catch(function(t){console.error(t)}).then(function(){n&&e.sketch&&"function"==typeof e.sketch.endRecord&&e._wrapContextScale(function(t){return e.sketch.endRecord(t)})})},B.prototype._createExportOptions=function(t){return void 0===t&&(t={}),{sequence:t.sequence,save:t.save,fps:this.props.fps,frame:t.sequence?this.props.frame:void 0,file:this.settings.file,name:this.settings.name,prefix:this.settings.prefix,suffix:this.settings.suffix,encoding:this.settings.encoding,encodingQuality:this.settings.encodingQuality,timeStamp:t.timeStamp||g(new Date,"yyyy.mm.dd-HH.MM.ss"),totalFrames:isFinite(this.props.totalFrames)?Math.max(0,this.props.totalFrames):1e3}},B.prototype.exportFrame=function(t){var e=this;if(void 0===t&&(t={}),!this.sketch)return Promise.all([]);"function"==typeof this.sketch.preExport&&this.sketch.preExport();var n=this._createExportOptions(t),i=u(),o=Promise.resolve();if(i&&t.commit&&"function"==typeof i.commit){var s=r({},n),a=i.commit(s);o=p(a)?a:Promise.resolve(a)}return o.then(function(t){return e._doExportFrame(r({},n,{hash:t||""}))}).then(function(t){return 1===t.length?t[0]:t})},B.prototype._doExportFrame=function(t){var e=this;void 0===t&&(t={}),this._props.exporting=!0,this.resize();var n=this.render(),i=this.props.canvas;return void 0===n&&(n=[i]),n=(n=[].concat(n).filter(Boolean)).map(function(e){var n,i="object"==typeof e&&e&&("data"in e||"dataURL"in e),o=i?e.data:e,s=i?r({},e,{data:o}):{data:o};if(c(n=o)&&/canvas/i.test(n.nodeName)&&"function"==typeof n.getContext){var a=function(t,e){void 0===e&&(e={});var n=e.encoding||"image/png";if(!T.includes(n))throw new Error("Invalid canvas encoding "+n);var i=(n.split("/")[1]||"").replace(/jpeg/i,"jpg");return i&&(i=("."+i).toLowerCase()),{extension:i,type:n,dataURL:t.toDataURL(n,e.encodingQuality)}}(o,{encoding:s.encoding||t.encoding,encodingQuality:h(s.encodingQuality,t.encodingQuality,.95)}),p=a.dataURL,u=a.extension,d=a.type;return Object.assign(s,{dataURL:p,extension:u,type:d})}return s}),this._props.exporting=!1,this.resize(),this.render(),Promise.all(n.map(function(e,n,i){var o=r({extension:"",prefix:"",suffix:""},t,e,{layer:n,totalLayers:i.length}),s=!1!==t.save&&e.save;for(var a in o.save=!1!==s,o.filename=P(o),delete o.encoding,delete o.encodingQuality,o)void 0===o[a]&&delete o[a];var p=Promise.resolve({});if(o.save){var c=o.data;if(o.dataURL)p=M(o.dataURL,o);else p=function(t,e){void 0===e&&(e={});var n=Array.isArray(t)?t:[t];return E(new window.Blob(n,{type:e.type||""}),e)}(c,o)}return p.then(function(t){return Object.assign({},o,t)})})).then(function(n){var i=n.filter(function(t){return t.save});if(i.length>0){var r,o=i.find(function(t){return t.outputName}),s=i.some(function(t){return t.client}),a=i.some(function(t){return t.stream});r=i.length>1?i.length:o?o.outputName+"/"+i[0].filename:""+i[0].filename;var p="";if(t.sequence)p=isFinite(e.props.totalFrames)?" (frame "+(t.frame+1)+" / "+e.props.totalFrames+")":" (frame "+t.frame+")";else i.length>1&&(p=" files");var c=s?"canvas-sketch-cli":"canvas-sketch",u=a?"Streaming into":"Exported";console.log("%c["+c+"]%c "+u+" %c"+r+"%c"+p,"color: #8e8e8e;","color: initial;","font-weight: bold;","font-weight: initial;")}return"function"==typeof e.sketch.postExport&&e.sketch.postExport(),n})},B.prototype._wrapContextScale=function(t){this._preRender(),t(this.props),this._postRender()},B.prototype._preRender=function(){var t=this.props;this.props.gl||!t.context||t.p5?t.p5&&t.p5.scale(t.scaleX/t.pixelRatio,t.scaleY/t.pixelRatio):(t.context.save(),!1!==this.settings.scaleContext&&t.context.scale(t.scaleX,t.scaleY))},B.prototype._postRender=function(){var t=this.props;this.props.gl||!t.context||t.p5||t.context.restore(),t.gl&&!1!==this.settings.flush&&!t.p5&&t.gl.flush()},B.prototype.tick=function(){this.sketch&&"function"==typeof this.sketch.tick&&(this._preRender(),this.sketch.tick(this.props),this._postRender())},B.prototype.render=function(){return this.props.p5?(this._lastRedrawResult=void 0,this.props.p5.redraw(),this._lastRedrawResult):this.submitDrawCall()},B.prototype.submitDrawCall=function(){if(this.sketch){var t,e=this.props;return this._preRender(),"function"==typeof this.sketch?t=this.sketch(e):"function"==typeof this.sketch.render&&(t=this.sketch.render(e)),this._postRender(),t}},B.prototype.update=function(t){var e=this;void 0===t&&(t={});var n=["animate"];Object.keys(t).forEach(function(t){if(n.indexOf(t)>=0)throw new Error("Sorry, the { "+t+" } option is not yet supported with update().")});var i=this._settings.canvas,r=this._settings.context;for(var o in t){var s=t[o];void 0!==s&&(e._settings[o]=s)}var a=Object.assign({},this._settings,t);if("time"in t&&"frame"in t)throw new Error("You should specify { time } or { frame } but not both");if("time"in t?delete a.frame:"frame"in t&&delete a.time,"duration"in t&&"totalFrames"in t)throw new Error("You should specify { duration } or { totalFrames } but not both");"duration"in t?delete a.totalFrames:"totalFrames"in t&&delete a.duration,"data"in t&&(this._props.data=t.data);var p=this.getTimeProps(a);if(Object.assign(this._props,p),i!==this._settings.canvas||r!==this._settings.context){var c=W(this._settings),u=c.canvas,h=c.context;this.props.canvas=u,this.props.context=h,this._setupGLKey(),this._appendCanvasIfNeeded()}return t.p5&&"function"!=typeof t.p5&&(this.props.p5=t.p5,this.props.p5.draw=function(){e._isP5Resizing||(e._lastRedrawResult=e.submitDrawCall())}),"playing"in t&&(t.playing?this.play():this.pause()),C(this._settings),this.resize(),this.render(),this.props},B.prototype.resize=function(){var t=this._getSizeProps(),e=this.settings,n=this.props,i=I(n,e);Object.assign(this._props,i);var r=this.props,o=r.pixelRatio,s=r.canvasWidth,a=r.canvasHeight,p=r.styleWidth,c=r.styleHeight,u=this.props.canvas;u&&!1!==e.resizeCanvas&&(n.p5?u.width===s&&u.height===a||(this._isP5Resizing=!0,n.p5.pixelDensity(o),n.p5.resizeCanvas(s/o,a/o,!1),this._isP5Resizing=!1):(u.width!==s&&(u.width=s),u.height!==a&&(u.height=a)),d()&&!1!==e.styleCanvas&&(u.style.width=p+"px",u.style.height=c+"px"));var h=this._getSizeProps(),l=!y(t,h);return l&&this._sizeChanged(),l},B.prototype._sizeChanged=function(){this.sketch&&"function"==typeof this.sketch.resize&&this.sketch.resize(this.props)},B.prototype.animate=function(){if(this.props.playing)if(d()){this._raf=window.requestAnimationFrame(this._animateHandler);var t=a(),e=1e3/this.props.fps,n=t-this._lastTime,i=this.props.duration,r="number"==typeof i&&isFinite(i),o=!0,s=this.settings.playbackRate;"fixed"===s?n=e:"throttle"===s?n>e?(t-=n%e,this._lastTime=t):o=!1:this._lastTime=t;var p=n/1e3,c=this.props.time+p*this.props.timeScale;c<0&&r&&(c=i+c);var u=!1,h=!1,l=!1!==this.settings.loop;if(r&&c>=i&&(l?(o=!0,c%=i,h=!0):(o=!1,c=i,u=!0),this._signalEnd()),o){this.props.deltaTime=p,this.props.time=c,this.props.playhead=this._computePlayhead(c,i);var f=this.props.frame;this.props.frame=this._computeCurrentFrame(),h&&this._signalBegin(),f!==this.props.frame&&this.tick(),this.render(),this.props.deltaTime=0}u&&this.pause()}else console.error("[canvas-sketch] WARN: Animation in Node.js is not yet supported")},B.prototype.dispatch=function(t){if("function"!=typeof t)throw new Error("must pass function into dispatch()");t(this.props),this.render()},B.prototype.mount=function(){this._appendCanvasIfNeeded()},B.prototype.unmount=function(){d()&&(window.removeEventListener("resize",this._resizeHandler),this._keyboardShortcuts.detach()),this.props.canvas.parentElement&&this.props.canvas.parentElement.removeChild(this.props.canvas)},B.prototype._appendCanvasIfNeeded=function(){d()&&(!1!==this.settings.parent&&this.props.canvas&&!this.props.canvas.parentElement&&(this.settings.parent||document.body).appendChild(this.props.canvas))},B.prototype._setupGLKey=function(){var t;this.props.context&&("function"==typeof(t=this.props.context).clear&&"function"==typeof t.clearColor&&"function"==typeof t.bufferData?this._props.gl=this.props.context:delete this._props.gl)},B.prototype.getTimeProps=function(t){void 0===t&&(t={});var e=t.duration,n=t.totalFrames,i=h(t.timeScale,1),r=h(t.fps,24),o="number"==typeof e&&isFinite(e),s="number"==typeof n&&isFinite(n),a=o?Math.floor(r*e):void 0,p=s?n/r:void 0;if(o&&s&&a!==n)throw new Error("You should specify either duration or totalFrames, but not both. Or, they must match exactly.");void 0===t.dimensions&&void 0!==t.units&&console.warn("You've specified a { units } setting but no { dimension }, so the units will be ignored."),n=h(n,a,1/0),e=h(e,p,1/0);var c=t.time,u=t.frame,d="number"==typeof c&&isFinite(c),l="number"==typeof u&&isFinite(u),f=0,m=0,y=0;if(d&&l)throw new Error("You should specify either start frame or time, but not both.");return d?(f=c,y=this._computePlayhead(f,e),m=this._computeFrame(y,f,n,r)):l&&(f=(m=u)/r,y=this._computePlayhead(f,e)),{playhead:y,time:f,frame:m,duration:e,totalFrames:n,fps:r,timeScale:i}},B.prototype.setup=function(t){var e=this;if(void 0===t&&(t={}),this.sketch)throw new Error("Multiple setup() calls not yet supported.");this._settings=Object.assign({},t,this._settings),C(this._settings);var n=W(this._settings),i=n.context,r=n.canvas,o=this.getTimeProps(this._settings);this._props=Object.assign({},o,{canvas:r,context:i,deltaTime:0,started:!1,exporting:!1,playing:!1,recording:!1,settings:this.settings,data:this.settings.data,render:function(){return e.render()},togglePlay:function(){return e.togglePlay()},dispatch:function(t){return e.dispatch(t)},tick:function(){return e.tick()},resize:function(){return e.resize()},update:function(t){return e.update(t)},exportFrame:function(t){return e.exportFrame(t)},record:function(){return e.record()},play:function(){return e.play()},pause:function(){return e.pause()},stop:function(){return e.stop()}}),this._setupGLKey(),this.resize()},B.prototype.loadAndRun=function(t,e){var n=this;return this.load(t,e).then(function(){return n.run(),n})},B.prototype.unload=function(){var t=this;this.pause(),this.sketch&&("function"==typeof this.sketch.unload&&this._wrapContextScale(function(e){return t.sketch.unload(e)}),this._sketch=null)},B.prototype.destroy=function(){this.unload(),this.unmount()},B.prototype.load=function(t,e){var n=this;if("function"!=typeof t)throw new Error("The function must take in a function as the first parameter. Example:\n  canvasSketcher(() => { ... }, settings)");this.sketch&&this.unload(),void 0!==e&&this.update(e),this._preRender();var i=Promise.resolve();if(this.settings.p5){if(!d())throw new Error("[canvas-sketch] ERROR: Using p5.js in Node.js is not supported");i=new Promise(function(t){var e,i=n.settings.p5;i.p5&&(e=i.preload,i=i.p5);var r=function(i){e&&(i.preload=function(){return e(i)}),i.setup=function(){var e=n.props,r="webgl"===n.settings.context,o=r?i.WEBGL:i.P2D;i.noLoop(),i.pixelDensity(e.pixelRatio),i.createCanvas(e.viewportWidth,e.viewportHeight,o),r&&n.settings.attributes&&i.setAttributes(n.settings.attributes),n.update({p5:i,canvas:i.canvas,context:i._renderer.drawingContext}),t()}};if("function"==typeof i)new i(r);else{if("function"!=typeof window.createCanvas)throw new Error("{ p5 } setting is passed but can't find p5.js in global (window) scope. Maybe you did not create it globally?\nnew p5(); // <-- attaches to global scope");r(window)}})}return i.then(function(){var e=t(n.props);return p(e)||(e=Promise.resolve(e)),e}).then(function(t){return t||(t={}),n._sketch=t,d()&&(n._keyboardShortcuts.attach(),window.addEventListener("resize",n._resizeHandler)),n._postRender(),n._sizeChanged(),n}).catch(function(t){throw console.warn("Could not start sketch, the async loading function rejected with an error:\n    Error: "+t.message),t})},Object.defineProperties(B.prototype,Y);var q="hot-id-cache",K=[];function G(t,e){if(void 0===e&&(e={}),e.p5){if(e.canvas||e.context&&"string"!=typeof e.context)throw new Error('In { p5 } mode, you can\'t pass your own canvas or context, unless the context is a "webgl" or "2d" string');var n="string"==typeof e.context&&e.context;e=Object.assign({},e,{canvas:!1,context:n})}var i,r,o=(i=u())&&i.hot;o&&(r=h(e.id,"$__DEFAULT_CANVAS_SKETCH_ID__$"));var s=o&&"string"==typeof r;s&&K.includes(r)&&(console.warn("Warning: You have multiple calls to canvasSketch() in --hot mode. You must pass unique { id } strings in settings to enable hot reload across multiple sketches. ",r),s=!1);var a=Promise.resolve();if(s){K.push(r);var p=function(t){var e=u();if(e)return e[q]=e[q]||{},e[q][t]}(r);if(p){var c=function(){var t,n=(t=p.manager,e.animate?{time:t.props.time}:void 0);return p.manager.destroy(),n};a=p.load.then(c).catch(c)}}return a.then(function(n){var i,o,a,p,c=new B;return t?(e=Object.assign({},e,n),c.setup(e),c.mount(),i=c.loadAndRun(t)):i=Promise.resolve(c),s&&(o=r,a={load:i,manager:c},(p=u())&&(p[q]=p[q]||{},p[q][o]=a)),i})}return G.canvasSketch=G,G.PaperSizes=S,G});
},{}],"gAVG":[function(require,module,exports) {
"use strict";function e(e){return e*Math.PI/180}Object.defineProperty(exports,"__esModule",{value:!0}),exports.degToRad=e;
},{}],"ZHff":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Leaf=exports.Branch=void 0;var t=require("../../../utils/deg-to-rad");class s extends Path2D{constructor(t,s,e=0,a="#fff"){super();const h=e*Math.PI/180;this.color=a,this.start=t,this.end={x:t.x+s*Math.sin(h),y:t.y-s*Math.cos(h)},this.moveTo(this.start.x,this.start.y),this.lineTo(this.end.x,this.end.y)}}exports.Branch=s;class e extends Path2D{constructor(s,e,a=0,h="#fff"){super(),this.color=h,this.start=s,this.end={x:s.x+e*Math.sin((0,t.degToRad)(a)),y:s.y-e*Math.cos((0,t.degToRad)(a))};const i=this.start.x+.5*(this.end.x-this.start.x),r=this.start.y+.5*(this.end.y-this.start.y),o={x:i+e/4*Math.sin((0,t.degToRad)(a+90)),y:r-e/4*Math.cos((0,t.degToRad)(a+90))},d={x:i+e/4*Math.sin((0,t.degToRad)(a-90)),y:r-e/4*Math.cos((0,t.degToRad)(a-90))};this.moveTo(this.start.x,this.start.y),this.quadraticCurveTo(o.x,o.y,this.end.x,this.end.y),this.quadraticCurveTo(d.x,d.y,this.start.x,this.start.y)}}exports.Leaf=e;
},{"../../../utils/deg-to-rad":"gAVG"}],"FUnG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.translate=t;var e=require("./line");function t(t,{stepLength:a,stepAngle:n,branchWidth:o,leafWidth:r}){const s=[],i=[];let c={x:0,y:0},h=0,d=o;for(const l of t.split(""))switch(l){case"0":{const t=new e.Leaf(c,a,h,Math.random()>.5?"#98BF60":"#475F30");t.width=r,c=t.end,s.push(t);break}case"1":case"2":{if(Math.random()>.4)break;const t=new e.Branch(c,a,h,"#8b5a2b");t.width=d,c=t.end,s.push(t);break}case"[":d*=.75,h-=n+10*(Math.random()-.5),i.push({location:{...c},rotation:h,lineWidth:d});break;case"]":{const{location:e,rotation:t,lineWidth:a}=i.pop();d=a,c={...e},h=t+2*n+10*(Math.random()-.5);break}}return s}
},{"./line":"ZHff"}],"rRRL":[function(require,module,exports) {
"use strict";function r(r,e){return Array.from({length:r}).map((r,t)=>e(t))}function e(e,t){const o={1:"21",0:"1[20]20"};let n=e;return r(t,()=>{const r=n.split("");return n="",r.forEach(r=>{n+=o[r]||r}),n}),n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=r,exports.growWood=e;
},{}],"VpMM":[function(require,module,exports) {
"use strict";function e(e,t){var r,o,n=this;return function(){r&&clearTimeout(r);for(var u=arguments.length,i=new Array(u),c=0;c<u;c++)i[c]=arguments[c];o=i,r=setTimeout(function(){e.apply(n,o),r=void 0},t)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.debounce=e;
},{}],"Focm":[function(require,module,exports) {
"use strict";var e=r(require("tweakpane")),t=r(require("canvas-sketch")),n=require("./translator"),a=require("./wood"),i=require("../../../utils/debounce");function r(e){return e&&e.__esModule?e:{default:e}}const d={stepLength:.01*window.innerHeight,stepAngle:16,iterations:12,branchWidth:16,leafWidth:4};let l;(async()=>{l=await(0,t.default)(e=>{const{context:t,width:i,height:r}=e;return()=>{t.fillStyle="#f8f8ff",t.fillRect(0,0,i,r),t.translate(i/2,r/4*3),t.strokeStyle="white",(0,n.translate)((0,a.growWood)("22220",d.iterations),d).forEach(e=>{t.beginPath(),t.strokeStyle=e.color,t.fillStyle=e.color,t.lineWidth=e.width,t.stroke(e),t.fill(e)})}})})();const s=new e.default({title:"Parameters",expanded:!1});s.addInput(d,"stepLength",{min:1,max:50,step:1}),s.addInput(d,"stepAngle",{min:0,max:180,step:1}),s.addInput(d,"iterations",{min:0,max:20,step:1}),s.addInput(d,"branchWidth",{min:1,max:50,step:1}),s.addInput(d,"leafWidth",{min:1,max:50,step:1}),s.on("change",(0,i.debounce)(()=>{l&&l.render()},500));
},{"tweakpane":"yZzA","canvas-sketch":"bkbf","./translator":"FUnG","./wood":"rRRL","../../../utils/debounce":"VpMM"}]},{},["Focm"], null)
//# sourceMappingURL=src.821e790b.js.map